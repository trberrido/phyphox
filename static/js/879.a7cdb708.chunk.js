"use strict";(self.webpackChunkphyphox_front=self.webpackChunkphyphox_front||[]).push([[879],{651:(e,i,t)=>{t.d(i,{A:()=>m});var n=t(43),l=t(475),s=t(216),a=t(913),r=t(197),o=t(141),c=t(579);const d=e=>{const i=(0,n.useContext)(o.pH).isUserAuthentificated,[t,s]=(0,n.useState)(!1);return(0,c.jsxs)("li",{className:"file-list__item"+(t?" file-list__item--deleting":""),"data-filename":e.item.filename,children:[(0,c.jsx)("span",{children:e.item.title}),(0,c.jsx)("br",{}),(0,c.jsx)(l.N_,{className:"file-list__link"+(t?" file-list__link--disabled":""),"aria-disabled":t,to:e.actionURL+e.item.id,children:e.actionName}),e.isRunnable?(0,c.jsx)("a",{onClick:e.isRunnable,"data-filename":e.item.filename,className:"file-list__link"+(t?" file-list__link--disabled":""),href:window.API+"/api/"+e.collection+"/"+e.item.filename,children:"Run"}):null,e.isDuplicable?(0,c.jsx)("a",{className:"file-list__link"+(t?" file-list__link--disabled":""),onClick:e.isDuplicable,href:window.API+"/api/"+e.collection+"/"+e.item.filename,children:"Duplicate"}):null,e.isDownloadable?(0,c.jsxs)("a",{className:"file-list__link"+(t?" file-list__link--disabled":""),href:e.downloadURL,target:"_blank",rel:"noreferrer","aria-disabled":t,download:!0,children:["download (json file, ",Math.round(e.item.filesize/1024)," KB)"]}):null,i?(0,c.jsx)("a",{className:"file-list__link"+(t?" file-list__link--disabled":""),target:"_blank",rel:"noreferrer",onClick:i=>{i.preventDefault(),e.deleteItem(i),s(!0)},href:window.API+"/api/"+e.collection+"/"+e.item.filename,children:"delete"}):null]})};const m=function(e){const i=(0,s.Zp)(),t=(0,n.useContext)(o.cr).setIsAppListening,[l,m]=(0,n.useState)({error:null,isLoaded:!1,items:[]}),h=e=>{e.preventDefault();const n=Date.now(),s=e.currentTarget.dataset.filename;fetch(window.API+"/api/app/state.json",{method:"PUT",credentials:"include",body:JSON.stringify({isListening:!0,currentConfiguration:s,startedAt:n})}).then((e=>e.json())).then((e=>{e.hasOwnProperty("error")?m({...l,error:e.error}):(t(!0),i("/"))}))},f=e=>{e.preventDefault();const i=e.currentTarget.href;fetch(i,{credentials:"include",method:"POST"}).then((e=>e.json())).then((e=>{if(e.hasOwnProperty("error"))m({...l,error:e.error});else{const i=structuredClone(l.items);i.unshift(e),m({...l,items:i})}}))},u=e=>{const i=e.currentTarget.href,t=e.currentTarget.closest(".file-list__item");fetch(i,{credentials:"include",method:"DELETE"}).then((e=>e.json())).then((e=>{if(!e.hasOwnProperty("error")){const e=[...l.items];m({...l,items:e.filter((e=>e.filename!==t.dataset.filename))})}}))};return(0,n.useEffect)((()=>{l.isLoaded||fetch(window.API+"/api/"+e.collection,{method:"GET"}).then((e=>e.json())).then((e=>{e.hasOwnProperty("error")?m({...l,error:e.error,isLoaded:!0}):m({...l,items:e,isLoaded:!0})}),(e=>{m({...l,isLoaded:!0,error:e})}))}),[e.collection,l]),l.error?(0,c.jsx)(a.A,{type:"error",message:l.error}):l.isLoaded?l.items.length?(0,c.jsx)("ul",{className:"file-list",children:l.items.map((i=>(0,c.jsx)(d,{isDownloadable:e.isDownloadable,isDuplicable:!!e.optionDuplicate&&f,isRunnable:!!e.optionRunnable&&h,downloadURL:window.API+"/api/"+e.collection+"/"+i.filename,item:i,collection:e.collection,actionName:e.actionName,actionURL:e.actionURL,deleteItem:u},i.id)))}):(0,c.jsx)("p",{children:"Nothing yet."}):(0,c.jsx)(r.A,{})}},68:(e,i,t)=>{t.d(i,{h:()=>r,r:()=>a});var n=t(43),l=t(141),s=t(579);const a=e=>(0,s.jsxs)("div",{className:"title",children:[(0,s.jsxs)("p",{className:"title__header",children:[e.header,e.icon?(0,s.jsx)("span",{className:"title__icon",children:e.icon}):null,e.image?(0,s.jsx)("img",{className:"title__image",alt:"",src:e.image}):null]}),(0,s.jsx)("h1",{className:"title__content",children:e.content})]}),r=e=>{const i=(0,n.useContext)(l.cr).isAppListening;return document.title=(!0===i?"\ud83d\udfe9":"\ud83d\udfe7")+" phyphox, "+e.content,(0,s.jsx)(a,{header:e.header,content:e.content,image:e.image,icon:e.icon})}},879:(e,i,t)=>{t.r(i),t.d(i,{default:()=>o});var n=t(43),l=t(68),s=t(651),a=t(579);class r extends n.Component{render(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.h,{header:"Search, see, download",content:"Previous experiments"}),(0,a.jsx)(s.A,{collection:"experiments",actionName:"See graph",actionURL:"/experiment/",isDownloadable:!0})]})}}const o=r}}]);
//# sourceMappingURL=879.a7cdb708.chunk.js.map