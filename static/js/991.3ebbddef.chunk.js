"use strict";(self.webpackChunkphyphox_front=self.webpackChunkphyphox_front||[]).push([[991],{651:(e,i,t)=>{t.d(i,{A:()=>m});var n=t(43),s=t(475),a=t(216),l=t(913),o=t(197),r=t(141),c=t(579);const d=e=>{const i=(0,n.useContext)(r.pH).isUserAuthentificated,[t,a]=(0,n.useState)(!1);return(0,c.jsxs)("li",{className:"file-list__item"+(t?" file-list__item--deleting":""),"data-filename":e.item.filename,children:[(0,c.jsx)("span",{children:e.item.title}),(0,c.jsx)("br",{}),(0,c.jsx)(s.N_,{className:"file-list__link"+(t?" file-list__link--disabled":""),"aria-disabled":t,to:e.actionURL+e.item.id,children:e.actionName}),e.isRunnable?(0,c.jsx)("a",{onClick:e.isRunnable,"data-filename":e.item.filename,className:"file-list__link"+(t?" file-list__link--disabled":""),href:window.API+"/api/"+e.collection+"/"+e.item.filename,children:"Run"}):null,e.isDuplicable?(0,c.jsx)("a",{className:"file-list__link"+(t?" file-list__link--disabled":""),onClick:e.isDuplicable,href:window.API+"/api/"+e.collection+"/"+e.item.filename,children:"Duplicate"}):null,e.isDownloadable?(0,c.jsxs)("a",{className:"file-list__link"+(t?" file-list__link--disabled":""),href:e.downloadURL,target:"_blank",rel:"noreferrer","aria-disabled":t,download:!0,children:["download (json file, ",Math.round(e.item.filesize/1024)," KB)"]}):null,i?(0,c.jsx)("a",{className:"file-list__link"+(t?" file-list__link--disabled":""),target:"_blank",rel:"noreferrer",onClick:i=>{i.preventDefault(),e.deleteItem(i),a(!0)},href:window.API+"/api/"+e.collection+"/"+e.item.filename,children:"delete"}):null]})};const m=function(e){const i=(0,a.Zp)(),t=(0,n.useContext)(r.cr).setIsAppListening,[s,m]=(0,n.useState)({error:null,isLoaded:!1,items:[]}),h=e=>{e.preventDefault();const n=Date.now(),a=e.currentTarget.dataset.filename;fetch(window.API+"/api/app/state.json",{method:"PUT",credentials:"include",body:JSON.stringify({isListening:!0,currentConfiguration:a,startedAt:n})}).then((e=>e.json())).then((e=>{e.hasOwnProperty("error")?m({...s,error:e.error}):(t(!0),i("/"))}))},f=e=>{e.preventDefault();const i=e.currentTarget.href;fetch(i,{credentials:"include",method:"POST"}).then((e=>e.json())).then((e=>{if(e.hasOwnProperty("error"))m({...s,error:e.error});else{const i=structuredClone(s.items);i.unshift(e),m({...s,items:i})}}))},u=e=>{const i=e.currentTarget.href,t=e.currentTarget.closest(".file-list__item");fetch(i,{credentials:"include",method:"DELETE"}).then((e=>e.json())).then((e=>{if(!e.hasOwnProperty("error")){const e=[...s.items];m({...s,items:e.filter((e=>e.filename!==t.dataset.filename))})}}))};return(0,n.useEffect)((()=>{s.isLoaded||fetch(window.API+"/api/"+e.collection,{method:"GET"}).then((e=>e.json())).then((e=>{e.hasOwnProperty("error")?m({...s,error:e.error,isLoaded:!0}):m({...s,items:e,isLoaded:!0})}),(e=>{m({...s,isLoaded:!0,error:e})}))}),[e.collection,s]),s.error?(0,c.jsx)(l.A,{type:"error",message:s.error}):s.isLoaded?s.items.length?(0,c.jsx)("ul",{className:"file-list",children:s.items.map((i=>(0,c.jsx)(d,{isDownloadable:e.isDownloadable,isDuplicable:!!e.optionDuplicate&&f,isRunnable:!!e.optionRunnable&&h,downloadURL:window.API+"/api/"+e.collection+"/"+i.filename,item:i,collection:e.collection,actionName:e.actionName,actionURL:e.actionURL,deleteItem:u},i.id)))}):(0,c.jsx)("p",{children:"Nothing yet."}):(0,c.jsx)(o.A,{})}},913:(e,i,t)=>{t.d(i,{A:()=>s});t(43);var n=t(579);const s=e=>(0,n.jsx)("p",{className:"message message--"+(e.type?e.type:"info"),children:e.message})},161:(e,i,t)=>{t.d(i,{A:()=>s});var n=t(579);const s=e=>(0,n.jsx)("div",{className:"spacer"+(e.size?"--"+e.size:"")})},68:(e,i,t)=>{t.d(i,{h:()=>o,r:()=>l});var n=t(43),s=t(141),a=t(579);const l=e=>(0,a.jsxs)("div",{className:"title",children:[(0,a.jsxs)("p",{className:"title__header",children:[e.header,e.icon?(0,a.jsx)("span",{className:"title__icon",children:e.icon}):null,e.image?(0,a.jsx)("img",{className:"title__image",alt:"",src:e.image}):null]}),(0,a.jsx)("h1",{className:"title__content",children:e.content})]}),o=e=>{const i=(0,n.useContext)(s.cr).isAppListening;return document.title=(!0===i?"\ud83d\udfe9":"\ud83d\udfe7")+" phyphox, "+e.content,(0,a.jsx)(l,{header:e.header,content:e.content,image:e.image,icon:e.icon})}},991:(e,i,t)=>{t.r(i),t.d(i,{default:()=>d});var n=t(43),s=t(68),a=t(161),l=t(651),o=t(935),r=t(141),c=t(579);const d=()=>{const e=(0,n.useContext)(r.cr).isAppListening;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.h,{header:"Hello Admin, what do you want to do ?",content:"Management space"}),(0,c.jsx)(a.A,{size:"small"}),(0,c.jsxs)("p",{children:["Current state : the application is ",!0===e?"on \ud83d\udc35":"off \ud83d\ude48","."]}),!0===e?(0,c.jsx)(o.Ym,{}):(0,c.jsx)(o.Gq,{replace:!0,to:"/administration/create_configuration",type:"important",text:"Create new configuration"}),(0,c.jsx)(a.A,{}),(0,c.jsx)("h2",{children:"Create a visualization from a past configuration :"}),(0,c.jsx)(l.A,{collection:"configurations",actionName:"Edit",actionURL:"/administration/edit_configuration/",optionRunnable:!0,optionDuplicate:!0})]})}}}]);
//# sourceMappingURL=991.3ebbddef.chunk.js.map