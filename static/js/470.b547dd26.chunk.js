"use strict";(self.webpackChunkphyphox_front=self.webpackChunkphyphox_front||[]).push([[470],{139:(e,a,i)=>{i.d(a,{A:()=>y});var t=i(43),n=i(216),l=i(161),s=i(935),r=i(913),o=i(469),d=i(110),c=i(579);const p=e=>{const a=e.typesAvailable[e.type].component;return(0,c.jsx)(a,{data:e.visualization,index:e.index,hasPythonFile:!!e.visualization.pythonfile.name,visualizationFormUpdate:e.visualizationFormUpdate,graphLinesAdd:!!e.graphLinesAdd&&e.graphLinesAdd,graphLinesRemove:!!e.graphLinesRemove&&e.graphLinesRemove,graphLinesUpdate:!!e.graphLinesUpdate&&e.graphLinesUpdate,graphLinesStyleUpdate:!!e.graphLinesStyleUpdate&&e.graphLinesStyleUpdate})},u=e=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o.ox,{id:"title",placeholder:"Visualization title *",value:e.visualization.title,handleChange:e.visualizationFormUpdate,type:"text",required:!0}),(0,c.jsx)(o.EY,{id:"description",handleChange:e.visualizationFormUpdate,placeholder:"Comments",value:e.visualization.description}),(0,c.jsx)(o.LB,{legend:"Python",children:e.visualization.pythonfile.name?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{children:(0,c.jsx)(s.Tk,{text:"Remove "+e.visualization.pythonfile.name,confirmedAction:e.fileInputRemove})}),e.visualization.pythonfile.extravariables.map(((a,i)=>(0,c.jsxs)("div",{className:"form-extravariable__wrapper","data-index":i.toString(),children:[(0,c.jsx)(o.ox,{id:"extravariable_"+i.toString(),placeholder:"variable name",value:a,handleChange:e.extraVariableUpdate,type:"text"}),(0,c.jsx)(s.a2,{value:"delete",classes:"form-extravariable__delete-button",handleClick:e.extraVariableRemove})]},i.toString()))),(0,c.jsx)(s.$n,{text:"Add a variable",handleClick:e.extraVariableAdd})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o.ox,{id:"pythonfile",placeholder:"Python file",modificationCSS:"variant",handleChange:e.fileInputAdd,accept:".py",type:"file"}),(0,c.jsx)("a",{className:"configuration__link",href:window.API+"/api/python",rel:"noreferrer",target:"_blank",children:"Which version of python should I use ?"})]})}),(0,c.jsx)(l.A,{size:"small"}),(0,c.jsx)(o.LB,{legend:"Select type *",children:Object.keys(e.visualizationTypes).map(((a,i)=>(0,c.jsx)(o.sx,{id:"type-"+e.index.toString(),placeholder:a,handleChange:e.visualizationFormTypeUpdate,required:!0,checked:e.visualization.type===a},i.toString()+"-"+a)))}),(0,c.jsx)(o.LB,{legend:"Notation *",children:["Decimal","Scientific"].map(((a,i)=>(0,c.jsx)(o.sx,{id:"notation-"+e.index.toString(),placeholder:a,handleChange:e.visualizationFormNotationUpdate,required:!0,checked:e.visualization.notation===a},i.toString()+"-"+a)))})]}),x=e=>(0,c.jsxs)("div",{"data-index":e.index,className:"configuration-visualization",children:[e.isSingle?null:(0,c.jsx)(s.a2,{value:"delete",classes:"configuration-visualization__delete-button",handleClick:e.visualizationFormRemove}),(0,c.jsx)(u,{index:e.index,extraVariableAdd:e.extraVariableAdd,extraVariableRemove:e.extraVariableRemove,extraVariableUpdate:e.extraVariableUpdate,fileInputAdd:e.fileInputAdd,fileInputRemove:e.fileInputRemove,visualizationTypes:e.visualizationTypes,visualization:e.visualization,visualizationFormTypeUpdate:e.visualizationFormTypeUpdate,visualizationFormNotationUpdate:e.visualizationFormNotationUpdate,visualizationFormUpdate:e.visualizationFormUpdate}),(0,c.jsx)(l.A,{size:"small"}),e.type&&(0,c.jsx)(p,{typesAvailable:e.visualizationTypes,type:e.type,index:e.index,visualization:e.visualization,value:e.visualization.id,visualizationFormUpdate:e.visualizationFormUpdate,graphLinesAdd:!!e.graphLinesAdd&&e.graphLinesAdd,graphLinesRemove:!!e.graphLinesRemove&&e.graphLinesRemove,graphLinesUpdate:!!e.graphLinesUpdate&&e.graphLinesUpdate,graphLinesStyleUpdate:!!e.graphLinesStyleUpdate&&e.graphLinesStyleUpdate})]}),m={"Single Number":{component:e=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o.LB,{legend:"phyphox data",children:(0,c.jsx)(o.ox,{id:"id",required:!0,placeholder:"Data ID *",modificationCSS:"variant",value:e.data.id?e.data.id:"",handleChange:e.visualizationFormUpdate,type:"text"})}),(0,c.jsx)(l.A,{size:"xxsmall"}),(0,c.jsx)(o.LB,{legend:"Options",children:(0,c.jsx)(o.ox,{id:"unit",placeholder:"Unit",modificationCSS:"variant",value:e.data.unit?e.data.unit:"",handleChange:e.visualizationFormUpdate,type:"text"})})]}),id:"",unit:""},Histogram:{component:e=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(o.LB,{legend:"phyphox data",children:(0,c.jsx)(o.ox,{id:"id",required:!0,modificationCSS:"variant",placeholder:"Data ID *",value:e.data.id?e.data.id:"",handleChange:e.visualizationFormUpdate,type:"text"})}),(0,c.jsx)(l.A,{size:"xxsmall"}),(0,c.jsxs)(o.LB,{legend:"Options",children:[(0,c.jsx)(o.ox,{id:"bins",modificationCSS:"variant",placeholder:"Bins",value:e.data.bins?e.data.bins:"",handleChange:e.visualizationFormUpdate,type:"number"}),(0,c.jsx)(l.A,{size:"regular"}),(0,c.jsx)(o.ox,{id:"labelx",modificationCSS:"variant",placeholder:"x axis label",value:e.data.labelx?e.data.labelx:"",handleChange:e.visualizationFormUpdate,type:"text"}),(0,c.jsx)(o.ox,{id:"labely",modificationCSS:"variant",placeholder:"y axis label",value:e.data.labely?e.data.labely:"",handleChange:e.visualizationFormUpdate,type:"text"}),(0,c.jsx)(l.A,{size:"regular"}),(0,c.jsx)(o.ox,{id:"xmin",modificationCSS:"variant",placeholder:"x axis min",value:e.data.xmin?e.data.xmin:"",handleChange:e.visualizationFormUpdate,type:"number"}),(0,c.jsx)(o.ox,{id:"xmax",modificationCSS:"variant",placeholder:"x axis max",value:e.data.xmax?e.data.xmax:"",handleChange:e.visualizationFormUpdate,type:"number"})]})]}),id:"",labelx:"",xmin:"",xmax:"",labely:"",ymin:"",ymax:"",bucketsnumber:""},Graph:{component:e=>{void 0===e.data.lines&&(e.data.lines=[{...d.NS}]);const a=e.data.lines.length<2;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(o.LB,{legend:"phyphox data",children:[(0,c.jsx)(o.ox,{id:"idx",modificationCSS:"variant",required:!0,placeholder:"Data ID x axis *",value:e.data.idx?e.data.idx:"",handleChange:e.visualizationFormUpdate,type:"text"}),(0,c.jsx)(o.ox,{id:"idy",modificationCSS:"variant",required:!0,placeholder:"Data ID y axis *",value:e.data.idy?e.data.idy:"",handleChange:e.visualizationFormUpdate,type:"text"})]}),(0,c.jsx)(l.A,{size:"xxsmall"}),(0,c.jsxs)(o.LB,{legend:"Options",children:[(0,c.jsx)(o.ox,{id:"labelx",modificationCSS:"variant",placeholder:"x axis label",value:e.data.labelx?e.data.labelx:"",handleChange:e.visualizationFormUpdate,type:"text"}),(0,c.jsx)(o.ox,{id:"xmin",modificationCSS:"variant",placeholder:"x axis min",value:e.data.xmin?e.data.xmin:"",handleChange:e.visualizationFormUpdate,type:"number"}),(0,c.jsx)(o.ox,{id:"xmax",modificationCSS:"variant",placeholder:"x axis max",value:e.data.xmax?e.data.xmax:"",handleChange:e.visualizationFormUpdate,type:"number"}),(0,c.jsx)(l.A,{size:"regular"}),(0,c.jsx)(o.ox,{id:"labely",modificationCSS:"variant",placeholder:"y axis label",value:e.data.labely?e.data.labely:"",handleChange:e.visualizationFormUpdate,type:"text"}),(0,c.jsx)(o.ox,{id:"ymin",modificationCSS:"variant",placeholder:"y axis min",value:e.data.ymin?e.data.ymin:"",handleChange:e.visualizationFormUpdate,type:"number"}),(0,c.jsx)(o.ox,{id:"ymax",modificationCSS:"variant",placeholder:"y axis max",value:e.data.ymax?e.data.ymax:"",handleChange:e.visualizationFormUpdate,type:"number"})]}),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.A,{size:"xxsmall"}),e.hasPythonFile?(0,c.jsxs)(o.LB,{legend:"Customization",children:[e.data.lines.map(((i,t)=>(0,c.jsxs)("div",{"data-index":t.toString(),className:"visualization-graph__line-list",children:[a?null:(0,c.jsx)(s.a2,{value:"delete",classes:"graph-line__delete-button",handleClick:e.graphLinesRemove}),(0,c.jsx)(o.LB,{className:"form__fieldset--single-line",legend:"Select line style",legendClassName:"form-fieldset__legend--single-line",children:["Solid","Dotted"].map(((a,n)=>(0,c.jsx)(o.sx,{id:"styleline-"+e.index.toString()+"-"+t.toString(),placeholder:a,handleChange:e.graphLinesStyleUpdate,checked:i.styleline===a},n.toString()+"-linestyle")))}),(0,c.jsx)(o.ox,{id:"idline",placeholder:"Line id",value:i.idline?i.idline:"",modificationCSS:"variant",handleChange:e.graphLinesUpdate}),(0,c.jsx)(o.ox,{id:"colorline",placeholder:"Color",type:"color",modificationCSS:"variant",value:i.colorline?i.colorline:"#ffffff",handleChange:e.graphLinesUpdate})]},t.toString()+"_line"))),(0,c.jsx)(s.$n,{text:"Add a new line",handleClick:e.graphLinesAdd})]}):null]})]})},xid:"",yid:"",labelx:"",xmin:"",xmax:"",labely:"",ymin:"",ymax:"",lines:[]}};var h=i(141);const v=e=>(0,c.jsxs)(c.Fragment,{children:[e.error&&(0,c.jsx)(r.A,{message:e.error,type:"error"}),(0,c.jsx)(o.ox,{id:"title",placeholder:"Project title *",value:e.project.title,handleChange:e.projectFormUpdate,type:"text",required:!0}),(0,c.jsx)(o.EY,{id:"description",placeholder:"Project description",value:e.project.description,handleChange:e.projectFormUpdate})]}),g=e=>{const a=e.visualizations.length<2;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("h2",{className:"configuration-form__title",children:"List of visualizations"}),(0,c.jsx)("div",{className:"configuration-form__visualizations-list",children:e.visualizations.map(((i,t)=>(0,c.jsx)(x,{index:t,isSingle:a,type:i.type,visualization:i,extraVariableAdd:e.extraVariableAdd,extraVariableRemove:e.extraVariableRemove,extraVariableUpdate:e.extraVariableUpdate,fileInputAdd:e.fileInputAdd,fileInputRemove:e.fileInputRemove,visualizationTypes:e.visualizationTypes,visualizationFormRemove:e.visualizationFormRemove,visualizationFormUpdate:e.visualizationFormUpdate,visualizationFormTypeUpdate:e.visualizationFormTypeUpdate,visualizationFormNotationUpdate:e.visualizationFormNotationUpdate,graphLinesAdd:"Graph"===i.type&&e.graphLinesAdd,graphLinesRemove:"Graph"===i.type&&e.graphLinesRemove,graphLinesUpdate:"Graph"===i.type&&e.graphLinesUpdate,graphLinesStyleUpdate:"Graph"===i.type&&e.graphLinesStyleUpdate},t.toString()+"-"+i.type)))})]})},y=e=>{const[a,i]=(0,t.useState)((0,n.LG)()),[r,p]=(0,t.useState)({isDisabled:!1,error:!1}),u=(0,n.Zp)(),x="PUT"===e.method?"/"+a.id+".json":"";(0,t.useContext)(h.cr).setIsAppListening;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(l.A,{size:"small"}),(0,c.jsxs)("form",{className:"form configuration-form",onSubmit:i=>{i.preventDefault(),p({...r,isDisabled:!0});const t=new Headers;t.append("Content-Type","application/json"),fetch(window.API+"/api/configurations"+x,{method:e.method,credentials:"include",headers:t,body:JSON.stringify(a)}).then((e=>e.json())).then((e=>{e.hasOwnProperty("error")?p({...r,isDisabled:!1,error:e.error}):u("/administration")}),(e=>{p({...r,isDisabled:!1,error:e})}))},children:[(0,c.jsx)(v,{project:a,projectFormUpdate:e=>{const t=structuredClone(a);t[e.target.name]=e.target.value,i(t)},error:r.error}),(0,c.jsx)(l.A,{size:"large"}),(0,c.jsx)(g,{visualizations:a.visualizations,visualizationTypes:m,extraVariableAdd:e=>{const t=e.currentTarget.closest(".configuration-visualization").dataset.index,n=structuredClone(a);n.visualizations[t].pythonfile.extravariables.push(""),i(n)},extraVariableRemove:e=>{const t=e.currentTarget.closest(".configuration-visualization").dataset.index,n=structuredClone(a),l=e.currentTarget.closest(".form-extravariable__wrapper").dataset.index;n.visualizations[t].pythonfile.extravariables.splice(l,1),i(n)},extraVariableUpdate:e=>{const t=e.currentTarget.closest(".configuration-visualization").dataset.index,n=structuredClone(a),l=e.currentTarget.closest(".form-extravariable__wrapper").dataset.index;n.visualizations[t].pythonfile.extravariables[l]=e.target.value,i(n)},fileInputAdd:e=>{const t=e.currentTarget.files[0],n=structuredClone(a),l=e.currentTarget.closest(".configuration-visualization").dataset.index,s=new FileReader;s.onload=()=>{n.visualizations[l].pythonfile.name=t.name,n.visualizations[l].pythonfile.data=s.result,i(n)},s.readAsDataURL(t)},fileInputRemove:e=>{const t=e.currentTarget.closest(".configuration-visualization").dataset.index,n=structuredClone(a);n.visualizations[t].pythonfile=structuredClone(d.n5),i(n)},visualizationFormRemove:e=>{const t=e.currentTarget.closest(".configuration-visualization").dataset.index,n=structuredClone(a);n.visualizations.splice(t,1),i(n)},visualizationFormUpdate:e=>{const t=e.currentTarget.closest(".configuration-visualization").dataset.index,n=structuredClone(a);n.visualizations[t][e.target.name]=e.target.value,i(n)},visualizationFormTypeUpdate:e=>{const t=e.currentTarget.closest(".configuration-visualization").dataset.index,n=structuredClone(a);n.visualizations[t].type=e.target.value,i(n)},visualizationFormNotationUpdate:e=>{const t=e.currentTarget.closest(".configuration-visualization").dataset.index,n=structuredClone(a);n.visualizations[t].notation=e.target.value,i(n)},graphLinesAdd:e=>{const t=e.currentTarget.closest(".configuration-visualization").dataset.index,n=a.visualizations[t].lines.concat({...d.NS}),l=structuredClone(a);l.visualizations[t].lines=n,i(l)},graphLinesRemove:e=>{const t=e.currentTarget.closest(".configuration-visualization").dataset.index,n=e.currentTarget.closest(".visualization-graph__line-list").dataset.index,l=structuredClone(a);l.visualizations[t].lines.splice(n,1),i(l)},graphLinesUpdate:e=>{const t=e.currentTarget.closest(".configuration-visualization").dataset.index,n=e.currentTarget.closest(".visualization-graph__line-list").dataset.index,l=structuredClone(a);l.visualizations[t].lines[n][e.target.name]=e.target.value,i(l)},graphLinesStyleUpdate:e=>{const t=e.currentTarget.closest(".configuration-visualization").dataset.index,n=e.currentTarget.closest(".visualization-graph__line-list").dataset.index,l=structuredClone(a);l.visualizations[t].lines[n].styleline=e.target.value,i(l)}}),(0,c.jsxs)("div",{className:"configuration-form__commands",children:[(0,c.jsx)(s.$n,{icon:"library_add",text:"Add a new visualization",handleClick:e=>{e.preventDefault();const t=a.visualizations.concat(structuredClone(d.Vu)),n=structuredClone(a);n.visualizations=t,i(n)}}),(0,c.jsx)(o.XT,{text:"Save",disabled:r.isDisabled})]})]})]})}},469:(e,a,i)=>{i.d(a,{EY:()=>r,LB:()=>n,XT:()=>o,ox:()=>l,sx:()=>s});i(43),i(2);var t=i(579);const n=e=>(0,t.jsxs)("fieldset",{className:"form__fieldset"+(e.className?" "+e.className:""),children:[(0,t.jsx)("legend",{className:"form-fieldset__legend"+(e.legendClassName?" "+e.legendClassName:""),children:e.legend}),e.children]}),l=e=>{const a=e.modificationCSS?e.modificationCSS:"regular",i="color"===e.type?"-color":"",n=e.isHidden?" form__labeled-input-container--hidden":"",l="undefined"===e.min?null:e.min,s="undefined"===e.max?null:e.max;return(0,t.jsxs)("div",{className:"form__labeled-input-container"+n+(e.modificationCSS?" form__labeled-input-container--"+e.modificationCSS:""),children:[(0,t.jsx)("label",{htmlFor:e.id,className:"form__label form__label--"+a,children:e.placeholder}),e.icon?(0,t.jsx)("span",{className:"form__input-icon",children:e.icon}):null,(0,t.jsx)("input",{readOnly:e.readOnly,value:e.value,onChange:e.handleChange,name:e.id,className:"form__input"+i+" form__input--"+a+(e.icon?" form__input-with-icon":" form__input-text-only"),placeholder:e.placeholder,min:l,max:s,type:e.type?e.type:"text",accept:e.accept?e.accept:null,required:e.required})]})},s=e=>(0,t.jsxs)("span",{className:"input-radio__wrapper",children:[(0,t.jsx)("input",{className:"input-radio__input",onChange:e.handleChange,name:e.id,required:e.required,value:e.placeholder,checked:e.checked,type:"radio"}),(0,t.jsx)("label",{htmlFor:e.id,children:e.placeholder})]}),r=e=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("label",{htmlFor:e.id,className:"form__label form__label--regular",children:e.placeholder}),(0,t.jsx)("textarea",{value:e.value,onChange:e.handleChange,name:e.id,className:"form__textarea form__textarea--regular",placeholder:e.placeholder,type:e.type,required:e.required})]}),o=e=>(0,t.jsx)("input",{className:"form__submit button button--important "+(e.disabled?"form__submit--disabled":""),disabled:e.disabled,type:"submit",value:e.text})},913:(e,a,i)=>{i.d(a,{A:()=>n});i(43);var t=i(579);const n=e=>(0,t.jsx)("p",{className:"message message--"+(e.type?e.type:"info"),children:e.message})},161:(e,a,i)=>{i.d(a,{A:()=>n});var t=i(579);const n=e=>(0,t.jsx)("div",{className:"spacer"+(e.size?"--"+e.size:"")})},68:(e,a,i)=>{i.d(a,{h:()=>r,r:()=>s});var t=i(43),n=i(141),l=i(579);const s=e=>(0,l.jsxs)("div",{className:"title",children:[(0,l.jsxs)("p",{className:"title__header",children:[e.header,e.icon?(0,l.jsx)("span",{className:"title__icon",children:e.icon}):null,e.image?(0,l.jsx)("img",{className:"title__image",alt:"",src:e.image}):null]}),(0,l.jsx)("h1",{className:"title__content",children:e.content})]}),r=e=>{const a=(0,t.useContext)(n.cr).isAppListening;return document.title=(a?"\ud83d\udfe9":"\ud83d\udfe7")+" phyphox, "+e.content,(0,l.jsx)(s,{header:e.header,content:e.content,image:e.image,icon:e.icon})}},2:()=>{}}]);
//# sourceMappingURL=470.b547dd26.chunk.js.map