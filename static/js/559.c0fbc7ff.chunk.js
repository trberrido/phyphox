"use strict";(self.webpackChunkpypox_front=self.webpackChunkpypox_front||[]).push([[559],{9559:function(t,e,n){n.d(e,{Z:function(){return k}});var i=n(1413),a=n(885),s=n(2791),r=n(184),o=function(t){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"visualization-number__output",children:parseFloat(t.data).toFixed(2)}),(0,r.jsx)("p",{className:"visualization-number__unit",children:t.unit})]})},l=n(2982),c=n(5081),h=function(t){return(0,r.jsx)("rect",{transform:"translate(".concat(t.margins.left,", ").concat(t.margins.top,")"),stroke:t.stroke,fill:"transparent",width:t.width,height:t.height})},d=function(t){var e=t.dimensions,n=t.margins,i=(0,s.useMemo)((function(){return t.yScale.ticks().map((function(e){return{value:e,yOffset:t.yScale(e)}}))}),[t]);return(0,r.jsxs)("svg",{children:[t.label?(0,r.jsx)("text",{fill:"currentColor",transform:"rotate(-90)",textAnchor:"end",x:-1*n.top,y:"15",children:t.label}):null,(0,r.jsx)("path",{d:["M",n.left,n.top,"v",e.height-(n.top+n.bottom)].join(" "),fill:"none",stroke:"currentColor"}),i.map((function(i){var a=i.value,s=i.yOffset;return(0,r.jsxs)("g",{transform:"translate(0, ".concat(s+10,")"),children:[(0,r.jsx)("line",{x1:n.left,x2:e.width-n.right,stroke:t.colors.stick}),(0,r.jsx)("text",{transform:"translate(".concat(n.left-10,", 2)"),fontSize:"10",textAnchor:"end",fill:"currentColor",children:a})]},a)}))]})},u=function(t){var e=t.dimensions,n=t.margins,i=(0,s.useMemo)((function(){return t.xScale.ticks().map((function(e){return{value:e,xOffset:t.xScale(e)}}))}),[t]);return(0,r.jsxs)("svg",{children:[t.label?(0,r.jsx)("text",{fill:"currentColor",textAnchor:"end",x:e.width-n.right,y:e.height,children:t.label}):null,(0,r.jsx)("path",{d:["M",n.left,e.height-n.bottom,"h",e.width-(n.left+n.right)].join(" "),fill:"none",stroke:"currentColor"}),i.map((function(i,a){var s=i.value,o=i.xOffset;return(0,r.jsxs)("g",{transform:"translate(".concat(o+n.left,", 0)"),children:[(0,r.jsx)("line",{y1:n.top,y2:e.height-n.bottom,stroke:t.colors.stick}),(0,r.jsx)("text",{transform:"translate(0,".concat(e.height+n.top-n.bottom+10,")"),fontSize:"10",textAnchor:"middle",fill:"currentColor",children:s})]},s+a.toString())}))]})},A=function(t){var e=t.dimensions.height-(t.margins.top+t.margins.bottom);return(0,r.jsx)("rect",{stroke:"black",fill:"grey",x:t.xScale(t.bucket.x0),width:t.xScale(t.bucket.x1)-t.xScale(t.bucket.x0),y:t.yScale(t.bucket.length),height:e-t.yScale(t.bucket.length)})},x=function(t){var e=t.colors,n=t.margins,i=t.data,a=t.dimensions,o=(0,s.useMemo)((function(){return c.Ly_()(i)}),[i]),x=(0,s.useMemo)((function(){return c.BYU().range([a.height-(n.top+n.bottom),0]).domain([0,1.1*Math.max.apply(Math,(0,l.Z)(o.map((function(t){return t.length}))))]).nice()}),[o,a,n]),m=(0,s.useMemo)((function(){return c.BYU().range([0,a.width-(n.left+n.right)]).domain([Math.min.apply(Math,(0,l.Z)(i)),Math.max.apply(Math,(0,l.Z)(i))]).nice()}),[i,a,n]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{width:a.width,height:a.height,children:[(0,r.jsx)("rect",{transform:"translate(".concat(n.left,", ").concat(n.top,")"),fill:e.background,width:a.width-(n.left+n.right),height:a.height-(n.top+n.bottom)}),(0,r.jsx)("g",{width:a.width-(n.left+n.right),height:a.height-(n.top+n.bottom),transform:"translate(".concat(n.left,", ").concat(n.top,")"),children:o.map((function(t,e){return(0,r.jsx)(A,{xScale:m,yScale:x,bucket:t,dimensions:a,margins:n},e.toString())}))}),(0,r.jsx)(d,{yScale:x,dimensions:a,margins:n,colors:e,label:!!t.axisLabel.y&&t.axisLabel.y}),(0,r.jsx)(u,{xScale:m,dimensions:a,margins:n,colors:e,label:!!t.axisLabel.x&&t.axisLabel.x}),(0,r.jsx)(h,{width:a.width-(n.left+n.right),height:a.height-(n.top+n.bottom),stroke:e.text,margins:n})]}),(0,r.jsxs)("p",{className:"histogram-infos",children:[(0,r.jsxs)("span",{className:"histogram-infos__item",children:["mean: ",c.J69(i).toFixed(2)]}),(0,r.jsxs)("span",{className:"histogram-infos__item",children:["median: ",c.C2o(i).toFixed(2)]}),(0,r.jsxs)("span",{className:"histogram-infos__item",children:["deviation: ",c.P3(i).toFixed(2)]})]})]})},m=function(t){return(0,r.jsx)("div",{className:"graph-legendes__wrapper",children:t.data.map((function(t,e){return(0,r.jsxs)("div",{className:"graph-legende",children:[(0,r.jsx)("div",{style:{background:t.colorline},className:"graph-legende__colorsquare"}),(0,r.jsx)("p",{className:"graph-legende__text",children:t.idline})]},t.idline+"_"+e.toString())}))})},g=function(t){return(0,r.jsx)("path",{fill:"none",stroke:t.color,d:t.spotsCoordinates[0].map((function(e,n){return(n?" L ":"M ")+t.xScale(e)+" "+t.yScale(t.spotsCoordinates[1][n])})).join(" ")})},p=function(t){return(0,r.jsx)(r.Fragment,{children:t.plots[0].map((function(e,n){return(0,r.jsx)("circle",{cx:t.xScale(e),cy:t.yScale(t.plots[1][n]),r:1,fill:"currentColor"},n.toString())}))})},f=function(t){var e=t.margins,n=t.lines,i=t.data[1],o=t.data[0],A=t.colors,x=t.dimensions,f=(0,s.useRef)(null),j=n.map((function(t){return{coordinates:i[t.idline],color:t.colorline}})),b=(0,s.useMemo)((function(){return[].concat((0,l.Z)(o),(0,l.Z)(Object.values(i))).map((function(t){return{x0:Math.min.apply(Math,(0,l.Z)(t[0])),x1:Math.max.apply(Math,(0,l.Z)(t[0])),y0:Math.min.apply(Math,(0,l.Z)(t[1])),y1:Math.max.apply(Math,(0,l.Z)(t[1]))}})).reduce((function(t,e){return{x0:t.x0<e.x0?t.x0:e.x0,x1:t.x1>e.x1?t.x1:e.x1,y0:t.y0<e.y0?t.y0:e.y0,y1:t.y1>e.y1?t.y1:e.y1}}))}),[o,i]),y=(0,s.useState)({x:c.BYU().range([0,x.width-(e.left+e.right)]).domain([b.x0,b.x1]),y:c.BYU().range([x.height-(e.top+e.bottom),0]).domain([b.y0,b.y1]).nice()}),w=(0,a.Z)(y,2),v=w[0],N=w[1];return(0,s.useEffect)((function(){N({x:c.BYU().range([0,x.width-(e.left+e.right)]).domain([b.x0,b.x1]),y:c.BYU().range([x.height-(e.top+e.bottom),0]).domain([b.y0,b.y1]).nice()})}),[x]),(0,s.useEffect)((function(){var t=c.sPX().scaleExtent([.9,3]).translateExtent([[0,0],[x.width,x.height]]).on("zoom",(function(t){var n=t.transform,i=n.rescaleX(v.x),a=n.rescaleY(v.y);N({x:c.BYU().range([0,x.width-(e.left+e.right)]).domain(i.domain()),y:c.BYU().range([x.height-(e.top+e.bottom),0]).domain(a.domain()).nice()})}));c.Ys(f.current).call(t)}),[x]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{width:x.width,height:x.height,ref:f,children:[(0,r.jsx)("rect",{transform:"translate(".concat(e.left,", ").concat(e.top,")"),fill:A.background,width:x.width-(e.left+e.right),height:x.height-(e.top+e.bottom)}),(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clipath",children:(0,r.jsx)("rect",{width:x.width-(e.left+e.right),height:x.height-(e.top+e.bottom),x:"0",y:"0"})})}),(0,r.jsxs)("g",{id:"svggraph",clipPath:"url(#clipath)",width:x.width-(e.left+e.right),height:x.height-(e.top+e.bottom),transform:"translate(".concat(e.left,", ").concat(e.top,")"),children:[o.map((function(t,e){return(0,r.jsx)(p,{xScale:v.x,yScale:v.y,plots:t},e.toString())})),Object.entries(j).map((function(t,e){var n=(0,a.Z)(t,2),i=n[0],s=n[1];return(0,r.jsx)(g,{xScale:v.x,yScale:v.y,spotsCoordinates:s.coordinates,color:s.color},i+"_"+e.toString())}))]}),(0,r.jsx)(d,{yScale:v.y,dimensions:x,margins:e,colors:A,label:!!t.axisLabel.y&&t.axisLabel.y}),(0,r.jsx)(u,{xScale:v.x,dimensions:x,margins:e,colors:A,label:!!t.axisLabel.x&&t.axisLabel.x}),(0,r.jsx)(h,{width:x.width-(e.left+e.right),height:x.height-(e.top+e.bottom),stroke:A.text,margins:e})]}),(0,r.jsx)(m,{data:n})]})},j=n(2022),b=n(4335),y=n(2687),w=function(t){return t.isOnGoingExperiment?(0,r.jsx)(b.Z,{}):(0,r.jsx)(j.Z,{message:"No data to display."})},v=function(t){var e=t.url+"/visualizations/"+t.index;return(0,r.jsxs)("div",{className:"visualization__footer",children:[(0,r.jsx)("div",{className:"visualization-footer__item-left",children:(0,r.jsx)("input",{className:"visualization-footer__item visualization-footer__button-fullscreen",onClick:t.handleClick,value:t.isFullscreen?"zoom_in_map":"zoom_out_map",type:"button"})}),t.isOnGoingExperiment?null:(0,r.jsxs)("a",{href:e,target:"_blank",rel:"noreferrer",className:"visualization-footer__item visualization-footer__dl",children:[(0,r.jsx)("span",{className:"visualization-footer__dl-icon",children:"download"}),"Download data (.json)"]})]})},N=function(t){var e={top:10,right:50,bottom:50,left:75},n={text:"#ADADAD",background:"#1B1A1A",stick:"#ADADAD47"},i=t.data,l=(0,s.useState)(!1),c=(0,a.Z)(l,2),h=c[0],d=c[1],u=(0,s.useRef)(null),A=(0,s.useState)({width:0,height:window.innerHeight*(h?.8:.5)}),m=(0,a.Z)(A,2),g=m[0],p=m[1],j=function(){d(!h)};return(0,s.useEffect)((function(){var t=function(t){"Escape"===t.key&&j()};return h&&window.addEventListener("keyup",t),function(){window.removeEventListener("keyup",t)}}),[h]),(0,s.useEffect)((function(){var t=u.current,e=new ResizeObserver((function(t){var e=t[0];e.contentRect.width!==g.width&&p({width:e.contentRect.width,height:window.innerHeight*(h?.7:.5)})}));return e.observe(t),function(){return e.unobserve(t)}}),[g,h,u]),(0,r.jsxs)("article",{className:"visualization"+(h?" visualization--fullscreen":""),children:[(0,r.jsxs)("div",{className:"visualization__frame",children:[h?(0,r.jsx)(y.Ei,{handleClick:j,classes:"visualization__close-button",icon:"close"}):null,(0,r.jsxs)("div",{className:"visualization__inner-padding",children:[(0,r.jsxs)("div",{className:"visualization__header",children:[(0,r.jsx)("h2",{className:"visualization__title",children:i.title}),(0,r.jsxs)("p",{className:"visualization__participants-number",children:[(0,r.jsx)("span",{children:i.contributions_total?i.contributions_total:0}),(0,r.jsx)("span",{className:"visualization__participants-icon",children:"group"})]})]}),(0,r.jsx)("div",{className:"visualization__wrapper",ref:u,children:0===g.width||0===i.displayedData.length?(0,r.jsx)(w,{isOnGoingExperiment:t.isOnGoingExperiment}):{"Single Number":(0,r.jsx)(o,{unit:i.unit,data:i.displayedData,isOnGoingExperiment:t.isOnGoingExperiment}),Histogram:(0,r.jsx)(x,{dimensions:g,colors:n,axisLabel:{x:i.labelx,y:i.labely},data:i.displayedData,margins:e}),Graph:(0,r.jsx)(f,{dimensions:g,colors:n,axisLabel:{x:i.labelx,y:i.labely},data:i.displayedData,lines:i.lines,margins:e})}[i.type]})]}),i.description?(0,r.jsx)("p",{className:"visualization__description",children:i.description}):null]}),(0,r.jsx)(v,{isFullscreen:h,handleClick:j,isOnGoingExperiment:t.isOnGoingExperiment,index:t.index,url:t.url})]})},E=n(5102),F=n(2918),k=function(t){var e=(0,s.useState)({isLoaded:!1,error:!1,data:null}),n=(0,a.Z)(e,2),o=n[0],l=n[1],c=(0,s.useContext)(F.zX).setIsAppListening;return(0,s.useEffect)((function(){if(t.isOnGoingExperiment||!o.isLoaded){var e=function(t){fetch(t,{credentials:"include"}).then((function(t){return t.json()})).then((function(t){t.hasOwnProperty("error")?l((0,i.Z)((0,i.Z)({},o),{},{isLoaded:!0,error:t.error})):"closing"===t?c(!1):l({isLoaded:!0,error:!1,data:t})}),(function(t){l((0,i.Z)((0,i.Z)({},o),{},{isLoaded:!0,error:String(t)}))}))};if(t.isOnGoingExperiment){var n=setInterval(e,1e3,t.fetchURL);return function(){clearInterval(n)}}e(t.fetchURL)}}),[o,t,c]),o.isLoaded?o.error?(0,r.jsx)(j.Z,{type:"error",message:o.error}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(E.D,{header:t.title,content:o.data.title,icon:!t.isOnGoingExperiment&&"square_foot",image:!!t.isOnGoingExperiment&&"data:image/gif;base64,R0lGODlhFAAIANU2AIFGGy8gFiEaFOJzIsZmH2Y5GUosFoJHHCEZFD0nFhoWEyIaFdRtIHNAGqtaHiEaFXpDG2w8Ge96Ii4fFTwmFS8gFYFHHG8+Gp1UHSgdFRsXFBwYFBwXFI9NHDklFpxUHVgzGKhZHj0mFkQqFioeFVk0GHlDGqpaHl82GDAgFUEoFhoXFHtDG209GmE4GUMpFnRAGlEwFz8nFlIwGPB6IhMTE////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo2OTcwQzBEMkY1NEFFRDExQkU4QUQ1NDI0RTY4RTdENiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpBMUExRUYyMDRBRjcxMUVEQUNBNkYzMUM5RTI3NjlCRSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBMUExRUYxRjRBRjcxMUVEQUNBNkYzMUM5RTI3NjlCRSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjZBNzBDMEQyRjU0QUVEMTFCRThBRDU0MjRFNjhFN0Q2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjY5NzBDMEQyRjU0QUVEMTFCRThBRDU0MjRFNjhFN0Q2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEBQoANgAsAAAAABQACAAABhLAmnBILBqPyKRyyWw6n9DoMQgAIfkEBQoANgAsAAAAAAEAAQAABgNAWxAAIfkEBQoANgAsAAAAAAEAAQAABgNAWxAAIfkEBQoANgAsAgACAAUABAAABhNA20O0EEIALFsFALAsOJeDyxYEACH5BAUKADYALAIAAgAFAAQAAAYTQFugEBAOaAObgUaTBAQEWsgWBAAh+QQFCgA2ACwFAAIABwAEAAAGF0Cb0LZQbYaLw8Fk89gqAIDlJFxFAKUgACH5BAUKADYALAUAAgAHAAQAAAYWQJvQFigIhgEajUFL2AxKiUMoINA+QQAh+QQFCgA2ACwLAAIABwAEAAAGFkCb0EaSaYapw+FCE44AgANG+GgAZkEAIfkEBQoANgAsDgACAAQABAAABg9AW6IgMNBoBNiRFmDQOkEAIfkEBQoANgAsAgACABAABAAABixAG4KCsBmHCqMtQ1EgIADIEQBoGCfUCJaasW0BxhcVoGgBUEZFBAA6NgCxIAA7"}),(0,r.jsx)("p",{className:"experiment__description",children:o.data.description}),o.data.visualizations.map((function(e,n){return(0,r.jsx)(N,{index:n,url:t.fetchURL,isOnGoingExperiment:t.isOnGoingExperiment,data:e},e.title+"_"+n.toString())}))]}):(0,r.jsx)(b.Z,{})}},2022:function(t,e,n){n.d(e,{Z:function(){return a}});n(2791);var i=n(184),a=function(t){return(0,i.jsx)("p",{className:"message message--"+(t.type?t.type:"info"),children:t.message})}},5102:function(t,e,n){n.d(e,{D:function(){return o},H:function(){return r}});var i=n(2791),a=n(2918),s=n(184),r=function(t){return(0,s.jsxs)("div",{className:"title",children:[(0,s.jsxs)("p",{className:"title__header",children:[t.header,t.icon?(0,s.jsx)("span",{className:"title__icon",children:t.icon}):null,t.image?(0,s.jsx)("img",{className:"title__image",alt:"",src:t.image}):null]}),(0,s.jsx)("h1",{className:"title__content",children:t.content})]})},o=function(t){var e=(0,i.useContext)(a.zX).isAppListening;return document.title=(e?"\ud83d\udfe9":"\ud83d\udfe7")+" pypox, "+t.content,(0,s.jsx)(r,{header:t.header,content:t.content,image:t.image,icon:t.icon})}}}]);
//# sourceMappingURL=559.c0fbc7ff.chunk.js.map