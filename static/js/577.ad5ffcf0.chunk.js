"use strict";(self.webpackChunkpypox_front=self.webpackChunkpypox_front||[]).push([[577],{5373:function(e,n,r){r.d(n,{L_:function(){return i},Y8:function(){return s},ex:function(){return l},k4:function(){return o},pg:function(){return a}});r(2791),r(9109);var t=r(184),a=function(e){return(0,t.jsxs)("fieldset",{className:"form__fieldset"+(e.className?" "+e.className:""),children:[(0,t.jsx)("legend",{className:"form-fieldset__legend",children:e.legend}),e.children]})},i=function(e){var n=e.modificationCSS?e.modificationCSS:"regular",r="color"===e.type?"-color":"",a=e.isHidden?" form__labeled-input-container--hidden":"";return(0,t.jsxs)("div",{className:"form__labeled-input-container"+a+(e.modificationCSS?" form__labeled-input-container--"+e.modificationCSS:""),children:[(0,t.jsx)("label",{htmlFor:e.id,className:"form__label form__label--"+n,children:e.placeholder}),e.icon?(0,t.jsx)("span",{className:"form__input-icon",children:e.icon}):null,(0,t.jsx)("input",{readOnly:e.readOnly,value:e.value,onChange:e.handleChange,name:e.id,className:"form__input"+r+" form__input--"+n+(e.icon?" form__input-with-icon":" form__input-text-only"),placeholder:e.placeholder,type:e.type?e.type:"text",accept:e.accept?e.accept:null,required:e.required})]})},s=function(e){return(0,t.jsxs)("span",{className:"input-radio__wrapper",children:[(0,t.jsx)("input",{className:"input-radio__input",onChange:e.handleChange,name:e.id,required:e.required,value:e.placeholder,checked:e.checked,type:"radio"}),(0,t.jsx)("label",{htmlFor:e.id,children:e.placeholder})]})},l=function(e){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("label",{htmlFor:e.id,className:"form__label form__label--regular",children:e.placeholder}),(0,t.jsx)("textarea",{value:e.value,onChange:e.handleChange,name:e.id,className:"form__textarea form__textarea--regular",placeholder:e.placeholder,type:e.type,required:e.required})]})},o=function(e){return(0,t.jsx)("input",{className:"form__submit button button--important "+(e.disabled?"form__submit--disabled":""),disabled:e.disabled,type:"submit",value:e.text})}},2022:function(e,n,r){r.d(n,{Z:function(){return a}});r(2791);var t=r(184),a=function(e){return(0,t.jsx)("p",{className:"message message--"+(e.type?e.type:"info"),children:e.message})}},5102:function(e,n,r){r.d(n,{D:function(){return l},H:function(){return s}});var t=r(2791),a=r(2918),i=r(184),s=function(e){return(0,i.jsxs)("div",{className:"title",children:[(0,i.jsxs)("p",{className:"title__header",children:[e.header,e.icon?(0,i.jsx)("span",{className:"title__icon",children:e.icon}):null,e.image?(0,i.jsx)("img",{className:"title__image",alt:"",src:e.image}):null]}),(0,i.jsx)("h1",{className:"title__content",children:e.content})]})},l=function(e){var n=(0,t.useContext)(a.zX).isAppListening;return document.title=(n?"\ud83d\udfe9":"\ud83d\udfe7")+" pypox, "+e.content,(0,i.jsx)(s,{header:e.header,content:e.content,image:e.image,icon:e.icon})}},4577:function(e,n,r){r.r(n);var t=r(4942),a=r(1413),i=r(885),s=r(2791),l=r(7689),o=r(5102),c=r(4335),d=r(5373),u=r(2022),m=r(2918),p=(r(9109),r(184));n.default=function(){var e=(0,s.useContext)(m.gd),n=e.isUserAuthentificated,r=e.setIsUserAuthentificated,f=(0,l.s0)(),h=(0,s.useState)({}),_=(0,i.Z)(h,2),x=_[0],g=_[1],b=(0,s.useState)({isDisabled:!1,error:!1,step:"email",doesUserExist:(0,l.f_)()}),j=(0,i.Z)(b,2),y=j[0],v=j[1],C=function(e){g((0,a.Z)((0,a.Z)({},x),{},(0,t.Z)({},e.target.name,e.target.value)))};return null===n?(0,p.jsx)(c.Z,{}):n?(0,p.jsx)(l.Fg,{to:"/administration",replace:!0}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.D,{header:"Adminstration",content:y.doesUserExist?"Log in to your account":"Create a new user"}),y.error&&(0,p.jsx)(u.Z,{type:"error",message:y.error}),(0,p.jsxs)("form",{id:"form",className:"form",onSubmit:function(e){e.preventDefault(),v((0,a.Z)((0,a.Z)({},y),{},{isDisabled:!0})),fetch("https://"+window.location.hostname+"/api/user/",{headers:{"Content-Type":"application/json"},method:y.doesUserExist?"PUT":"POST",credentials:"include",body:JSON.stringify(x)}).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("error")?v((0,a.Z)((0,a.Z)({},y),{},{isDisabled:!1,error:e.error})):"email"===y.step?v((0,a.Z)((0,a.Z)({},y),{},{error:!1,step:"password",isDisabled:!1})):(r(!0),f("/administration",{replace:!0}))}),(function(e){v((0,a.Z)((0,a.Z)({},y),{},{error:e,isDisabled:!1}))}))},children:["email"===y.step?(0,p.jsx)(d.L_,{id:"email",modificationCSS:"regular form__label--small",icon:"mail",isHidden:!1,readOnly:!1,placeholder:"Email",value:x.email?x.email:"",handleChange:C,type:"email",required:!0}):(0,p.jsxs)(p.Fragment,{children:[!y.error&&(0,p.jsx)(u.Z,{message:"A code has been sent you by email."}),(0,p.jsx)(d.L_,{id:"password",icon:"key",modificationCSS:"regular form__label--small",placeholder:"Received password",value:x.password?x.password:"",handleChange:C,type:"password",required:!0}),(0,p.jsx)("input",{type:"button",className:"form__button--reset",onClick:function(e){e.preventDefault(),v((0,a.Z)((0,a.Z)({},y),{},{step:"email"}))},value:"Send a new password"}),(0,p.jsx)("br",{})]}),(0,p.jsx)(d.k4,{text:y.doesUserExist?"Authentificate":"Create new user",disabled:y.isDisabled})]})]})}},9109:function(){}}]);
//# sourceMappingURL=577.ad5ffcf0.chunk.js.map