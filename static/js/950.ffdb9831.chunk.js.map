{"version":3,"file":"static/js/950.ffdb9831.chunk.js","mappings":"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","sources":["components/form.jsx","components/message.jsx","components/title.jsx","pages/login.jsx"],"sourcesContent":["import React from 'react';\n\nimport './form.css';\n\nconst Fieldset = (props) => {\n\treturn (\n\t\t<fieldset className={'form__fieldset' + (props.className ? ' ' + props.className : '')}>\n\t\t\t<legend className={'form-fieldset__legend' + (props.legendClassName ? ' ' + props.legendClassName : '')}>{props.legend}</legend>\n\t\t\t{props.children}\n\t\t</fieldset>\n\t);\n}\n\nconst LabeledInput = (props) => {\n\n\tconst modificationCSS = props.modificationCSS ? props.modificationCSS : 'regular';\n\tconst classInputType = props.type === 'color' ? '-color' : '';\n\tconst classIsHidden = props.isHidden ? ' form__labeled-input-container--hidden' : '';\n\tconst min = props.min === 'undefined' ? null : props.min;\n\tconst max = props.max === 'undefined' ? null : props.max;\n\n\treturn (\n\t\t<div className={'form__labeled-input-container' + classIsHidden + (props.modificationCSS ? ' form__labeled-input-container--' + props.modificationCSS : '')} >\n\t\t\t<label\n\t\t\t\thtmlFor={props.id}\n\t\t\t\tclassName={'form__label form__label--' + modificationCSS }>\n\t\t\t\t\t{props.placeholder}\n\t\t\t</label>\n\t\t\t{\n\t\t\t\tprops.icon ?\n\t\t\t\t<span className='form__input-icon'>{props.icon}</span>\n\t\t\t\t: null\n\t\t\t}\n\t\t\t<input\n\t\t\t\treadOnly={props.readOnly}\n\t\t\t\tvalue={props.value}\n\t\t\t\tonChange={props.handleChange}\n\t\t\t\tname={props.id}\n\t\t\t\tclassName={\n\t\t\t\t\t'form__input' + classInputType\n\t\t\t\t\t+ ' form__input--' + modificationCSS\n\t\t\t\t\t+ (props.icon ? ' form__input-with-icon' : ' form__input-text-only')\n\t\t\t\t}\n\t\t\t\tplaceholder={props.placeholder}\n\t\t\t\tmin={min}\n\t\t\t\tmax={max}\n\t\t\t\ttype={props.type ? props.type : 'text'}\n\t\t\t\taccept={props.accept ? props.accept : null}\n\t\t\t\trequired={props.required} />\n\t\t</div>\n\t);\n}\n\nconst Radio = (props) => {\n\treturn (<span className='input-radio__wrapper'>\n\t\t<input\n\t\t\tclassName='input-radio__input'\n\t\t\tonChange={props.handleChange}\n\t\t\tname={props.id}\n\t\t\trequired={props.required}\n\t\t\tvalue={props.placeholder}\n\t\t\tchecked={props.checked}\n\t\t\ttype='radio' />\n\t\t<label htmlFor={props.id} >\n\t\t\t{props.placeholder}\n\t\t</label>\n\t</span>)\n}\n\nconst LabeledTextarea = (props) => {\n\treturn (<>\n\t\t<label\n\t\t\thtmlFor={props.id}\n\t\t\tclassName='form__label form__label--regular'>\n\t\t\t\t{props.placeholder}\n\t\t</label>\n\t\t<textarea\n\t\t\tvalue={props.value}\n\t\t\tonChange={props.handleChange}\n\t\t\tname={props.id}\n\t\t\tclassName='form__textarea form__textarea--regular'\n\t\t\tplaceholder={props.placeholder}\n\t\t\ttype={props.type}\n\t\t\trequired={props.required} />\n\t</>)\n}\n\nconst Submit = (props) => {\n\treturn (\n\t\t<input\n\t\t\tclassName={'form__submit button button--important ' +  (props.disabled ? 'form__submit--disabled' : '') }\n\t\t\tdisabled={props.disabled}\n\t\t\ttype='submit'\n\t\t\tvalue={props.text} />\n\t);\n}\n\nexport {LabeledInput, LabeledTextarea, Submit, Radio, Fieldset};","import React from 'react';\nimport './message.css';\n\nconst Message = (props) => {\n\treturn (\n\t\t<p className={\"message message--\" + (props.type ? props.type : 'info')}>{props.message}</p>\n\t)\n}\n\nexport default Message;","import React, { useContext } from 'react';\n\nimport './title.css';\n\nimport { AppStateContext } from '../context.jsx';\n\nconst TitleLight = (props) => {\n\t// made for 404 error page, unable to get context\n\treturn (\n\t\t<div className='title'>\n\t\t\t<p className='title__header'>\n\t\t\t\t{ props.header }\n\t\t\t\t{\n\t\t\t\t\tprops.icon ? \n\t\t\t\t\t<span className='title__icon'>\n\t\t\t\t\t\t{props.icon}\n\t\t\t\t\t</span>\n\t\t\t\t\t: null\n\t\t\t\t}\n\t\t\t\t{\n\t\t\t\t\tprops.image ?\n\t\t\t\t\t<img className='title__image' alt='' src={props.image} />\n\t\t\t\t\t: null\n\t\t\t\t}\n\t\t\t</p>\n\t\t\t<h1 className='title__content'>{ props.content }</h1>\n\t\t</div>\n\t);\n}\n\nconst Title = (props) => {\n\n\tconst isAppListening = useContext(AppStateContext).isAppListening;\n\n\tdocument.title = (isAppListening === true ? 'ðŸŸ©' : 'ðŸŸ§') + ' phyphox, ' + props.content;\n\t\n\treturn (\n\t\t<TitleLight\n\t\t\theader={props.header}\n\t\t\tcontent={props.content}\n\t\t\timage={props.image}\n\t\t\ticon={props.icon} />\n\t)\n\t\n}\n\nexport {Title, TitleLight};","/*\n\tThe login process is made in two steps :\n\t\t> email (POST if user doesn't exist, PUT if so)\n\t\t> password (PUT)\n*/\n\nimport React, { useState, useContext } from \"react\";\nimport { useNavigate, Navigate, useLoaderData } from \"react-router-dom\";\n\nimport {Title} from '../components/title.jsx';\nimport Loader from '../components/loader.jsx';\nimport { LabeledInput, Submit } from '../components/form.jsx';\nimport Message from '../components/message.jsx';\nimport { AuthentificationContext } from '../context.jsx';\n\nimport '../components/form.css';\n\nconst PageLogin = () => {\n\n\tconst {isUserAuthentificated, setIsUserAuthentificated} = useContext(AuthentificationContext);\n\tlet navigate = useNavigate();\n\n\tconst [credentials, setCredentials] = useState({});\n\n\tconst [formState, setFormState] = useState({\n\t\tisDisabled: false,\n\t\terror: false,\n\t\tstep: 'email',\n\t\tdoesUserExist: useLoaderData()\n\t});\n\n\tconst handleInputChange = (e) => {\n\t\tsetCredentials({...credentials, [e.target.name]: e.target.value});\n\t}\n\n\tconst resendPassword = (e) => {\n\t\te.preventDefault();\n\t\tsetFormState({...formState, step: 'email'});\n\t}\n\n\tfunction handleSubmit(e){\n\n\t\te.preventDefault();\n\t\tsetFormState({...formState, isDisabled: true});\n\n\t\tfetch(window.API + '/api/user/',\n\t\t\t{\n\t\t\t\theaders: {'Content-Type': 'application/json'},\n\t\t\t\tmethod: (formState.doesUserExist ? 'PUT' : 'POST'),\n\t\t\t\tcredentials: 'include',\n\t\t\t\tbody: JSON.stringify(credentials)\n\t\t\t}\n\t\t)\n\t\t.then((response) => response.json())\n\t\t.then((result) => {\n\n\t\t\t\tif (result.hasOwnProperty('error')){\n\n\t\t\t\t\tsetFormState({...formState, isDisabled: false, error: result.error})\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif (formState.step === 'email'){\n\n\t\t\t\t\t\tsetFormState({\n\t\t\t\t\t\t\t...formState,\n\t\t\t\t\t\t\terror: false,\n\t\t\t\t\t\t\tstep: 'password',\n\t\t\t\t\t\t\tisDisabled: false\n\t\t\t\t\t\t});\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetIsUserAuthentificated(true);\n\t\t\t\t\t\tnavigate('/administration', { replace: true });\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t},\n\t\t\t(error) => {\n\t\t\t\tsetFormState({...formState, error: error, isDisabled: false});\n\t\t\t}\n\t\t)\n\n\t}\n\n\tif (isUserAuthentificated === null){\n\t\treturn <Loader />;\n\t}\n\n\tif (isUserAuthentificated){\n\t\treturn <Navigate to=\"/administration\" replace />;\n\t}\n\n\treturn (\n\t\t<>\n\n\t\t\t<Title header='Adminstration' content={formState.doesUserExist ? 'Log in to your account' : 'Create a new user'}/>\n\t\t\n\t\t\t{formState.error && <Message type='error' message={formState.error} />}\n\t\t\t\n\t\t\t<form id='form' className='form' onSubmit={handleSubmit}>\n\t\t\t\t{(formState.step === 'email') ?\n\n\t\t\t\t\t<LabeledInput\n\t\t\t\t\t\tid='email'\n\t\t\t\t\t\tmodificationCSS='regular form__label--small'\n\t\t\t\t\t\ticon='mail'\n\t\t\t\t\t\tisHidden={false}\n\t\t\t\t\t\treadOnly={false}\n\t\t\t\t\t\tplaceholder='Email'\n\t\t\t\t\t\tvalue={(credentials.email ? credentials.email : '')}\n\t\t\t\t\t\thandleChange={handleInputChange}\n\t\t\t\t\t\ttype='email'\n\t\t\t\t\t\trequired={true}\n\t\t\t\t\t/>\n\t\t\t\t:\n\t\t\t\t\t<>\n\t\t\t\t\t\n\t\t\t\t\t\t{ !formState.error && <Message message='A code has been sent you by email.' /> }\n\t\t\t\t\t\t<LabeledInput\n\t\t\t\t\t\t\tid='password'\n\t\t\t\t\t\t\ticon='key'\n\t\t\t\t\t\t\tmodificationCSS='regular form__label--small'\n\t\t\t\t\t\t\tplaceholder='Received password'\n\t\t\t\t\t\t\tvalue={(credentials.password ? credentials.password : '')}\n\t\t\t\t\t\t\thandleChange={handleInputChange}\n\t\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\t\trequired={true}\t/>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t<input type='button' className='form__button--reset' onClick={resendPassword} value='Send a new password' /><br />\n\t\t\t\t\t</>\n\n\t\t\t\t}\n\t\t\t\t<Submit text={formState.doesUserExist ? 'Authentificate' : 'Create new user'} disabled={formState.isDisabled} />\n\t\t\t</form>\n\t\t\t\n\t\t</>\n\t);\n};\n\nexport default PageLogin;"],"names":["Fieldset","props","_jsxs","className","children","_jsx","legendClassName","legend","LabeledInput","modificationCSS","classInputType","type","classIsHidden","isHidden","min","max","htmlFor","id","placeholder","icon","readOnly","value","onChange","handleChange","name","accept","required","Radio","checked","LabeledTextarea","_Fragment","Submit","disabled","text","message","TitleLight","header","image","alt","src","content","Title","isAppListening","useContext","AppStateContext","document","title","PageLogin","isUserAuthentificated","setIsUserAuthentificated","AuthentificationContext","navigate","useNavigate","credentials","setCredentials","useState","formState","setFormState","isDisabled","error","step","doesUserExist","useLoaderData","handleInputChange","e","target","Loader","Navigate","to","replace","Message","onSubmit","preventDefault","fetch","window","API","headers","method","body","JSON","stringify","then","response","json","result","hasOwnProperty","email","password","onClick"],"sourceRoot":""}