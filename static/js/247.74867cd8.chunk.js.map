{"version":3,"file":"static/js/247.74867cd8.chunk.js","mappings":"yPAUMA,EAAW,SAACC,GACjB,IAAMC,GAAoBC,EAAAA,EAAAA,YAAWC,EAAAA,IAAyBC,sBAE9D,GAAoCC,EAAAA,EAAAA,WAAS,GAAM,eAA5CC,EAAU,KAAEC,EAAa,KAQhC,OACC,gBACCC,UAAW,mBAAqBF,EAAa,6BAA+B,IAC5E,gBAAeN,EAAMS,KAAKC,SAAS,WAEnC,0BAAOV,EAAMS,KAAKE,SAAa,mBAE/B,SAAC,KAAI,CACJH,UAAW,mBAAqBF,EAAa,6BAA+B,IAC5E,gBAAeA,EACfM,GAAIZ,EAAMa,UAAYb,EAAMS,KAAKK,GAAG,SAEnCd,EAAMe,aAIPf,EAAMgB,YACN,cACCC,QAASjB,EAAMgB,WACf,gBAAehB,EAAMS,KAAKC,SAC1BF,UAAW,mBAAqBF,EAAa,6BAA+B,IAC5EY,KAAMC,OAAOC,IAAM,QAAUpB,EAAMqB,WAAa,IAAMrB,EAAMS,KAAKC,SAAU,iBAI1E,KAGFV,EAAMsB,cACN,cACCd,UAAW,mBAAqBF,EAAa,6BAA+B,IAC5EW,QAASjB,EAAMsB,aACfJ,KAAMC,OAAOC,IAAM,QAAUpB,EAAMqB,WAAa,IAAMrB,EAAMS,KAAKC,SAAU,uBAI1E,KAEFV,EAAMuB,gBACN,eACCf,UAAW,mBAAqBF,EAAa,6BAA+B,IAC5EY,KAAMlB,EAAMwB,YACZC,OAAO,SAASC,IAAI,aACpB,gBAAepB,EACfqB,UAAQ,oCACcC,KAAKC,MAAM7B,EAAMS,KAAKqB,SAAW,MAAK,UAE3D,KAEF7B,GACA,cACCO,UAAW,mBAAqBF,EAAa,6BAA+B,IAC5EmB,OAAO,SAASC,IAAI,aACpBT,QA3DgB,SAACc,GACpBA,EAAEC,iBACFhC,EAAMiC,WAAWF,GACjBxB,GAAc,EACf,EAwDIW,KAAMC,OAAOC,IAAM,QAAUpB,EAAMqB,WAAa,IAAMrB,EAAMS,KAAKC,SAAS,oBAGzE,OAIN,EA0HA,MAxHA,SAAcV,GAEb,IAAMkC,GAAWC,EAAAA,EAAAA,MACXC,GAAoBlC,EAAAA,EAAAA,YAAWmC,EAAAA,IAAiBD,kBAEtD,GAAwB/B,EAAAA,EAAAA,UAAS,CAChCiC,MAAO,KACPC,UAAU,EACVC,MAAO,KACN,eAJKC,EAAI,KAAEC,EAAO,KAMdC,EAAM,SAACZ,GAEZA,EAAEC,iBACF,IAAMY,EAASC,KAAKC,MACdC,EAAgBhB,EAAEiB,cAAcC,QAAQvC,SAC9CwC,MAAM/B,OAAOC,IAAM,sBAAuB,CACzC+B,OAAQ,MACRC,YAAa,UACbC,KAAMC,KAAKC,UAAU,CAACC,aAAa,EAAMC,qBAAsBV,EAAeW,UAAWd,MAEzFe,MAAK,SAACC,GAAQ,OAAKA,EAASC,MAAM,IAClCF,MAAK,SAACG,GACDA,EAAOC,eAAe,SAI1BrB,GAAQ,kBAAID,GAAI,IAAEH,MAAOwB,EAAOxB,UAHhCF,GAAkB,GAClBF,EAAS,KAIX,GAED,EAEM8B,EAAgB,SAACjC,GAEtBA,EAAEC,iBACF,IAAMiC,EAAMlC,EAAEiB,cAAc9B,KAC5BgC,MAAMe,EACL,CACCb,YAAc,UACdD,OAAQ,SAERQ,MAAK,SAACC,GAAQ,OAAKA,EAASC,MAAM,IAClCF,MAAK,SAACG,GACN,GAAKA,EAAOC,eAAe,SAK1BrB,GAAQ,kBAAID,GAAI,IAAEH,MAAOwB,EAAOxB,aALG,CACnC,IAAM4B,EAAeC,gBAAgB1B,EAAKD,OAC1C0B,EAAaE,QAAQN,GACrBpB,GAAQ,kBAAID,GAAI,IAAED,MAAO0B,IAC1B,CAGD,GAEF,EAEMjC,EAAa,SAACF,GAEnB,IAAMsC,EAAYtC,EAAEiB,cAAc9B,KAC5BT,EAAOsB,EAAEiB,cAAcsB,QAAQ,oBAErCpB,MAAMmB,EAAW,CAACjB,YAAa,UAAWD,OAAQ,WAChDQ,MAAK,SAAAC,GAAQ,OAAIA,EAASC,MAAM,IAChCF,MAAK,SAACG,GACN,IAAKA,EAAOC,eAAe,SAAS,CACnC,IAAMQ,GAAI,OAAO9B,EAAKD,OACtBE,GAAQ,kBAAID,GAAI,IAAED,MAAO+B,EAAKC,QAAO,SAAAC,GAAQ,OAAIA,EAAS/D,WAAaD,EAAKwC,QAAQvC,QAAQ,MAC7F,CACD,GAEF,EAqBA,OAnBAgE,EAAAA,EAAAA,YAAU,WACJjC,EAAKF,UACTW,MAAM/B,OAAOC,IAAM,QAAUpB,EAAMqB,WAAY,CAAC8B,OAAQ,QACvDQ,MAAM,SAAAgB,GAAG,OAAIA,EAAId,MAAM,IACvBF,MACA,SAACG,GACIA,EAAOC,eAAe,SACzBrB,GAAQ,kBAAID,GAAI,IAAEH,MAAOwB,EAAOxB,MAAOC,UAAU,KAEjDG,GAAQ,kBAAID,GAAI,IAAED,MAAOsB,EAAQvB,UAAU,IAE7C,IACA,SAACD,GACAI,GAAQ,kBAAID,GAAI,IAAEF,UAAU,EAAMD,MAAOA,IAC1C,GAGH,GAAG,CAACtC,EAAMqB,WAAYoB,IAElBA,EAAKH,OACD,SAAC,IAAO,CAACsC,KAAK,QAAQC,QAASpC,EAAKH,QAChCG,EAAKF,SAGZE,EAAKD,MAAMsC,QAEb,eAAItE,UAAU,YAAW,SACvBiC,EAAKD,MAAMuC,KAAI,SAAAtE,GAAI,OACnB,SAACV,EAAQ,CACRwB,eAAgBvB,EAAMuB,eACtBD,eAActB,EAAMgF,iBAAkBhB,EACtChD,aAAYhB,EAAMiF,gBAAiBtC,EACnCnB,YAAaL,OAAOC,IAAM,QAAUpB,EAAMqB,WAAa,IAAMZ,EAAKC,SAElED,KAAMA,EACNY,WAAYrB,EAAMqB,WAClBN,WAAYf,EAAMe,WAClBF,UAAWb,EAAMa,UACjBoB,WAAYA,GALPxB,EAAKK,GAMR,OAKE,yCAtBF,SAAC,IAAM,GAyBhB,C,4ECjMA,EANgB,SAACd,GAChB,OACC,cAAGQ,UAAW,qBAAuBR,EAAM4E,KAAO5E,EAAM4E,KAAO,QAAQ,SAAE5E,EAAM6E,SAEjF,C,oECCA,EANe,SAAC7E,GACf,OACC,gBAAKQ,UAAW,UAAYR,EAAMkF,KAAQ,KAAOlF,EAAMkF,KAAQ,KAEjE,C,+GCAMC,EAAa,SAACnF,GAEnB,OACC,iBAAKQ,UAAU,QAAO,WACrB,eAAGA,UAAU,gBAAe,UACzBR,EAAMoF,OAEPpF,EAAMqF,MACN,iBAAM7E,UAAU,cAAa,SAC3BR,EAAMqF,OAEN,KAGFrF,EAAMsF,OACN,gBAAK9E,UAAU,eAAe+E,IAAI,GAAGC,IAAKxF,EAAMsF,QAC9C,SAGJ,eAAI9E,UAAU,iBAAgB,SAAGR,EAAMyF,YAG1C,EAEMC,EAAQ,SAAC1F,GAEd,IAAM2F,GAAiBzF,EAAAA,EAAAA,YAAWmC,EAAAA,IAAiBsD,eAInD,OAFAC,SAASjF,OAASgF,EAAiB,eAAO,gBAAQ,aAAe3F,EAAMyF,SAGtE,SAACN,EAAU,CACVC,OAAQpF,EAAMoF,OACdK,QAASzF,EAAMyF,QACfH,MAAOtF,EAAMsF,MACbD,KAAMrF,EAAMqF,MAGf,C,uGCJA,UAhC2B,WAC1B,IAAMM,GAAiBzF,EAAAA,EAAAA,YAAWmC,EAAAA,IAAiBsD,eACnD,OACC,iCACC,SAAC,IAAK,CACLP,OAAO,wCACPK,QAAQ,sBAET,SAAC,IAAM,CAACP,KAAK,WAEb,+DAAuCS,EAAiB,kBAAU,mBAAQ,OAEzEA,GACA,SAAC,KAAmB,KACpB,SAAC,KAAW,CAACE,SAAO,EAACjF,GAAG,uCAAuCgE,KAAK,YAAYkB,KAAK,8BAGtF,SAAC,IAAM,KAEP,gFAEA,SAAC,IAAI,CACJzE,WAAW,iBACXN,WAAW,OACXF,UAAU,sCACVoE,gBAAgB,EAChBD,iBAAiB,MAIrB,C","sources":["components/list.jsx","components/message.jsx","components/spacer.jsx","components/title.jsx","pages/administration.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\n\nimport Message from './message.jsx';\nimport Loader from './loader.jsx';\n\nimport { AuthentificationContext, AppStateContext } from '../context.jsx';\n\nimport './list.css';\n\nconst ListItem = (props) => {\n\tconst isAuthentificated = useContext(AuthentificationContext).isUserAuthentificated;\n\n\tconst [isDisabled, setIsDisabled] = useState(false);\n\n\tconst handleClick = (e) => {\n\t\te.preventDefault();\n\t\tprops.deleteItem(e);\n\t\tsetIsDisabled(true);\n\t}\n\n\treturn (\n\t\t<li\n\t\t\tclassName={'file-list__item' + (isDisabled ? ' file-list__item--deleting' : '')}\n\t\t\tdata-filename={props.item.filename}\n\t\t>\n\t\t\t<span>{props.item.title}</span><br />\n\n\t\t\t<Link\n\t\t\t\tclassName={'file-list__link' + (isDisabled ? ' file-list__link--disabled' : '')}\n\t\t\t\taria-disabled={isDisabled}\n\t\t\t\tto={props.actionURL + props.item.id}\n\t\t\t>\n\t\t\t\t{props.actionName}\n\t\t\t</Link>\n\n\t\t\t{\n\t\t\t\tprops.isRunnable ?\n\t\t\t\t<a\n\t\t\t\t\tonClick={props.isRunnable}\n\t\t\t\t\tdata-filename={props.item.filename}\n\t\t\t\t\tclassName={'file-list__link' + (isDisabled ? ' file-list__link--disabled' : '')}\n\t\t\t\t\thref={window.API + '/api/' + props.collection + '/' + props.item.filename }\n\t\t\t\t>\n\t\t\t\t\tRun\n\t\t\t\t</a>\n\t\t\t\t: null\n\t\t\t}\n\n\t\t\t{props.isDuplicable ?\n\t\t\t\t<a\n\t\t\t\t\tclassName={'file-list__link' + (isDisabled ? ' file-list__link--disabled' : '')}\n\t\t\t\t\tonClick={props.isDuplicable}\n\t\t\t\t\thref={window.API + '/api/' + props.collection + '/' + props.item.filename }\n\t\t\t\t>\n\t\t\t\t\tDuplicate\n\t\t\t\t</a>\n\t\t\t\t: null }\n\n\t\t\t{props.isDownloadable ?\n\t\t\t\t<a\n\t\t\t\t\tclassName={'file-list__link' + (isDisabled ? ' file-list__link--disabled' : '')}\n\t\t\t\t\thref={props.downloadURL}\n\t\t\t\t\ttarget='_blank' rel='noreferrer'\n\t\t\t\t\taria-disabled={isDisabled}\n\t\t\t\t\tdownload >\n\t\t\t\t\tdownload (json file, {Math.round(props.item.filesize / 1024)} KB)\n\t\t\t\t</a>\n\t\t\t\t: null }\n\n\t\t\t{isAuthentificated ?\n\t\t\t\t<a\n\t\t\t\t\tclassName={'file-list__link' + (isDisabled ? ' file-list__link--disabled' : '')}\n\t\t\t\t\ttarget='_blank' rel='noreferrer'\n\t\t\t\t\tonClick={handleClick}\n\t\t\t\t\thref={window.API + '/api/' + props.collection + '/' + props.item.filename}>\n\t\t\t\t\t\tdelete\n\t\t\t\t\t</a>\n\t\t\t\t: null}\n\t\t</li>\n\t);\n\n}\n\nfunction List(props) {\n\n\tconst navigate = useNavigate();\n\tconst setIsAppListening = useContext(AppStateContext).setIsAppListening;\n\n\tconst [list, setList] = useState({\n\t\terror: null,\n\t\tisLoaded: false,\n\t\titems: []\n\t});\n\n\tconst run = (e) => {\n\n\t\te.preventDefault();\n\t\tconst dateID = Date.now()\n\t\tconst configuration = e.currentTarget.dataset.filename;\n\t\tfetch(window.API + '/api/app/state.json', {\n\t\t\tmethod: 'PUT',\n\t\t\tcredentials: 'include',\n\t\t\tbody: JSON.stringify({isListening: true, currentConfiguration: configuration, startedAt: dateID})\n\t\t})\n\t\t.then((response) => response.json())\n\t\t.then((result) => {\n\t\t\tif (!result.hasOwnProperty('error')){\n\t\t\t\tsetIsAppListening(true);\n\t\t\t\tnavigate('/')\n\t\t\t} else {\n\t\t\t\tsetList({...list, error: result.error})\n\t\t\t}\n\t\t})\n\n\t}\n\n\tconst duplicateItem = (e) => {\n\n\t\te.preventDefault();\n\t\tconst URL = e.currentTarget.href;\n\t\tfetch(URL,\n\t\t\t{\n\t\t\t\tcredentials : 'include',\n\t\t\t\tmethod: 'POST'\n\t\t\t})\n\t\t\t.then((response) => response.json())\n\t\t\t.then((result) => {\n\t\t\t\tif (!result.hasOwnProperty('error')){\n\t\t\t\t\tconst newItemsList = structuredClone(list.items);\n\t\t\t\t\tnewItemsList.unshift(result)\n\t\t\t\t\tsetList({...list, items: newItemsList});\n\t\t\t\t} else {\n\t\t\t\t\tsetList({...list, error: result.error})\n\t\t\t\t}\n\t\t\t})\n\n\t}\n\n\tconst deleteItem = (e) => {\n\n\t\tconst deleteURL = e.currentTarget.href;\n\t\tconst item = e.currentTarget.closest('.file-list__item');\n\n\t\tfetch(deleteURL, {credentials: 'include', method: 'DELETE'})\n\t\t\t.then(response => response.json())\n\t\t\t.then((result) => {\n\t\t\t\tif (!result.hasOwnProperty('error')){\n\t\t\t\t\tconst copy = [...list.items];\n\t\t\t\t\tsetList({...list, items: copy.filter(listItem => listItem.filename !== item.dataset.filename)});\n\t\t\t\t}\n\t\t\t})\n\n\t}\n\n\tuseEffect(() => {\n\t\tif (!list.isLoaded){\n\t\t\tfetch(window.API + '/api/' + props.collection, {method: 'GET'})\n\t\t\t.then (res => res.json())\n\t\t\t.then (\n\t\t\t\t(result) => {\n\t\t\t\t\tif (result.hasOwnProperty('error')){\n\t\t\t\t\t\tsetList({...list, error: result.error, isLoaded: true})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetList({...list, items: result, isLoaded: true})\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t(error) => {\n\t\t\t\t\tsetList({...list, isLoaded: true, error: error})\n\t\t\t\t}\n\t\t\t)\n\t\t}\n\t}, [props.collection, list]);\n\n\tif (list.error){\n\t\treturn <Message type='error' message={list.error} />;\n\t} else if (!list.isLoaded){\n\t\treturn <Loader />;\n\t} else {\n\t\tif (list.items.length) {\n\t\t\treturn (\n\t\t\t\t<ul className='file-list'>\n\t\t\t\t\t{list.items.map(item => (\n\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\tisDownloadable={props.isDownloadable}\n\t\t\t\t\t\t\tisDuplicable={props.optionDuplicate ? duplicateItem : false}\n\t\t\t\t\t\t\tisRunnable={props.optionRunnable ? run : false}\n\t\t\t\t\t\t\tdownloadURL={window.API + '/api/' + props.collection + '/' + item.filename}\n\t\t\t\t\t\t\tkey={item.id}\n\t\t\t\t\t\t\titem={item}\n\t\t\t\t\t\t\tcollection={props.collection}\n\t\t\t\t\t\t\tactionName={props.actionName}\n\t\t\t\t\t\t\tactionURL={props.actionURL}\n\t\t\t\t\t\t\tdeleteItem={deleteItem}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t);\n\t\t} else {\n\t\t\treturn (<p>Nothing yet.</p>);\n\t\t}\n\t}\n}\n\nexport default List;","import React from 'react';\nimport './message.css';\n\nconst Message = (props) => {\n\treturn (\n\t\t<p className={\"message message--\" + (props.type ? props.type : 'info')}>{props.message}</p>\n\t)\n}\n\nexport default Message;","import './spacer.css';\n\nconst Spacer = (props) => {\n\treturn (\n\t\t<div className={'spacer' + (props.size ? ('--' + props.size) : '')}></div>\n\t);\n}\n\nexport default Spacer;","import React, { useContext } from 'react';\n\nimport './title.css';\n\nimport { AppStateContext } from '../context.jsx';\n\nconst TitleLight = (props) => {\n\t// made for 404 error page, unable to get context\n\treturn (\n\t\t<div className='title'>\n\t\t\t<p className='title__header'>\n\t\t\t\t{ props.header }\n\t\t\t\t{\n\t\t\t\t\tprops.icon ? \n\t\t\t\t\t<span className='title__icon'>\n\t\t\t\t\t\t{props.icon}\n\t\t\t\t\t</span>\n\t\t\t\t\t: null\n\t\t\t\t}\n\t\t\t\t{\n\t\t\t\t\tprops.image ?\n\t\t\t\t\t<img className='title__image' alt='' src={props.image} />\n\t\t\t\t\t: null\n\t\t\t\t}\n\t\t\t</p>\n\t\t\t<h1 className='title__content'>{ props.content }</h1>\n\t\t</div>\n\t);\n}\n\nconst Title = (props) => {\n\n\tconst isAppListening = useContext(AppStateContext).isAppListening;\n\n\tdocument.title = (isAppListening ? 'üü©' : 'üüß') + ' phyphox, ' + props.content;\n\t\n\treturn (\n\t\t<TitleLight\n\t\t\theader={props.header}\n\t\t\tcontent={props.content}\n\t\t\timage={props.image}\n\t\t\ticon={props.icon} />\n\t)\n\t\n}\n\nexport {Title, TitleLight};","import React, { useContext } from 'react';\n\nimport {Title} from '../components/title.jsx';\nimport Spacer from '../components/spacer.jsx';\nimport List from '../components/list.jsx';\nimport { ButtonStopListening, LinkPrivate } from '../components/button.jsx';\nimport { AppStateContext } from '../context.jsx';\n\nconst PageAdministration = () => {\n\tconst isAppListening = useContext(AppStateContext).isAppListening;\n\treturn (\n\t\t<>\n\t\t\t<Title\n\t\t\t\theader='Hello Admin, what do you want to do ?'\n\t\t\t\tcontent='Management space'/>\n\n\t\t\t<Spacer size='small' />\n\n\t\t\t<p>Current state : the application is {isAppListening ? 'on üêµ' : 'off üôà'}.</p>\n\n\t\t\t{isAppListening ?\n\t\t\t\t<ButtonStopListening /> :\n\t\t\t\t<LinkPrivate replace to='/administration/create_configuration' type='important' text='Create new configuration'/>\n\t\t\t}\n\n\t\t\t<Spacer />\n\n\t\t\t<h2>Create a visualization from a past configuration :</h2>\n\n\t\t\t<List\n\t\t\t\tcollection='configurations'\n\t\t\t\tactionName='Edit'\n\t\t\t\tactionURL='/administration/edit_configuration/'\n\t\t\t\toptionRunnable={true}\n\t\t\t\toptionDuplicate={true}\n\t\t\t/>\n\t\t</>\n\t);\n};\n\nexport default PageAdministration;"],"names":["ListItem","props","isAuthentificated","useContext","AuthentificationContext","isUserAuthentificated","useState","isDisabled","setIsDisabled","className","item","filename","title","to","actionURL","id","actionName","isRunnable","onClick","href","window","API","collection","isDuplicable","isDownloadable","downloadURL","target","rel","download","Math","round","filesize","e","preventDefault","deleteItem","navigate","useNavigate","setIsAppListening","AppStateContext","error","isLoaded","items","list","setList","run","dateID","Date","now","configuration","currentTarget","dataset","fetch","method","credentials","body","JSON","stringify","isListening","currentConfiguration","startedAt","then","response","json","result","hasOwnProperty","duplicateItem","URL","newItemsList","structuredClone","unshift","deleteURL","closest","copy","filter","listItem","useEffect","res","type","message","length","map","optionDuplicate","optionRunnable","size","TitleLight","header","icon","image","alt","src","content","Title","isAppListening","document","replace","text"],"sourceRoot":""}