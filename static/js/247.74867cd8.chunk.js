"use strict";(self.webpackChunkphyphox_front=self.webpackChunkphyphox_front||[]).push([[247],{5590:function(e,n,i){i.d(n,{Z:function(){return h}});var t=i(2982),a=i(1413),r=i(885),l=i(2791),o=i(1087),s=i(7689),c=i(2022),u=i(4335),d=i(2918),f=i(184),m=function(e){var n=(0,l.useContext)(d.gd).isUserAuthentificated,i=(0,l.useState)(!1),t=(0,r.Z)(i,2),a=t[0],s=t[1];return(0,f.jsxs)("li",{className:"file-list__item"+(a?" file-list__item--deleting":""),"data-filename":e.item.filename,children:[(0,f.jsx)("span",{children:e.item.title}),(0,f.jsx)("br",{}),(0,f.jsx)(o.rU,{className:"file-list__link"+(a?" file-list__link--disabled":""),"aria-disabled":a,to:e.actionURL+e.item.id,children:e.actionName}),e.isRunnable?(0,f.jsx)("a",{onClick:e.isRunnable,"data-filename":e.item.filename,className:"file-list__link"+(a?" file-list__link--disabled":""),href:window.API+"/api/"+e.collection+"/"+e.item.filename,children:"Run"}):null,e.isDuplicable?(0,f.jsx)("a",{className:"file-list__link"+(a?" file-list__link--disabled":""),onClick:e.isDuplicable,href:window.API+"/api/"+e.collection+"/"+e.item.filename,children:"Duplicate"}):null,e.isDownloadable?(0,f.jsxs)("a",{className:"file-list__link"+(a?" file-list__link--disabled":""),href:e.downloadURL,target:"_blank",rel:"noreferrer","aria-disabled":a,download:!0,children:["download (json file, ",Math.round(e.item.filesize/1024)," KB)"]}):null,n?(0,f.jsx)("a",{className:"file-list__link"+(a?" file-list__link--disabled":""),target:"_blank",rel:"noreferrer",onClick:function(n){n.preventDefault(),e.deleteItem(n),s(!0)},href:window.API+"/api/"+e.collection+"/"+e.item.filename,children:"delete"}):null]})};var h=function(e){var n=(0,s.s0)(),i=(0,l.useContext)(d.zX).setIsAppListening,o=(0,l.useState)({error:null,isLoaded:!1,items:[]}),h=(0,r.Z)(o,2),p=h[0],_=h[1],x=function(e){e.preventDefault();var t=Date.now(),r=e.currentTarget.dataset.filename;fetch(window.API+"/api/app/state.json",{method:"PUT",credentials:"include",body:JSON.stringify({isListening:!0,currentConfiguration:r,startedAt:t})}).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("error")?_((0,a.Z)((0,a.Z)({},p),{},{error:e.error})):(i(!0),n("/"))}))},j=function(e){e.preventDefault();var n=e.currentTarget.href;fetch(n,{credentials:"include",method:"POST"}).then((function(e){return e.json()})).then((function(e){if(e.hasOwnProperty("error"))_((0,a.Z)((0,a.Z)({},p),{},{error:e.error}));else{var n=structuredClone(p.items);n.unshift(e),_((0,a.Z)((0,a.Z)({},p),{},{items:n}))}}))},g=function(e){var n=e.currentTarget.href,i=e.currentTarget.closest(".file-list__item");fetch(n,{credentials:"include",method:"DELETE"}).then((function(e){return e.json()})).then((function(e){if(!e.hasOwnProperty("error")){var n=(0,t.Z)(p.items);_((0,a.Z)((0,a.Z)({},p),{},{items:n.filter((function(e){return e.filename!==i.dataset.filename}))}))}}))};return(0,l.useEffect)((function(){p.isLoaded||fetch(window.API+"/api/"+e.collection,{method:"GET"}).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("error")?_((0,a.Z)((0,a.Z)({},p),{},{error:e.error,isLoaded:!0})):_((0,a.Z)((0,a.Z)({},p),{},{items:e,isLoaded:!0}))}),(function(e){_((0,a.Z)((0,a.Z)({},p),{},{isLoaded:!0,error:e}))}))}),[e.collection,p]),p.error?(0,f.jsx)(c.Z,{type:"error",message:p.error}):p.isLoaded?p.items.length?(0,f.jsx)("ul",{className:"file-list",children:p.items.map((function(n){return(0,f.jsx)(m,{isDownloadable:e.isDownloadable,isDuplicable:!!e.optionDuplicate&&j,isRunnable:!!e.optionRunnable&&x,downloadURL:window.API+"/api/"+e.collection+"/"+n.filename,item:n,collection:e.collection,actionName:e.actionName,actionURL:e.actionURL,deleteItem:g},n.id)}))}):(0,f.jsx)("p",{children:"Nothing yet."}):(0,f.jsx)(u.Z,{})}},2022:function(e,n,i){i.d(n,{Z:function(){return a}});i(2791);var t=i(184),a=function(e){return(0,t.jsx)("p",{className:"message message--"+(e.type?e.type:"info"),children:e.message})}},6246:function(e,n,i){i.d(n,{Z:function(){return a}});var t=i(184),a=function(e){return(0,t.jsx)("div",{className:"spacer"+(e.size?"--"+e.size:"")})}},5102:function(e,n,i){i.d(n,{D:function(){return o},H:function(){return l}});var t=i(2791),a=i(2918),r=i(184),l=function(e){return(0,r.jsxs)("div",{className:"title",children:[(0,r.jsxs)("p",{className:"title__header",children:[e.header,e.icon?(0,r.jsx)("span",{className:"title__icon",children:e.icon}):null,e.image?(0,r.jsx)("img",{className:"title__image",alt:"",src:e.image}):null]}),(0,r.jsx)("h1",{className:"title__content",children:e.content})]})},o=function(e){var n=(0,t.useContext)(a.zX).isAppListening;return document.title=(n?"\ud83d\udfe9":"\ud83d\udfe7")+" phyphox, "+e.content,(0,r.jsx)(l,{header:e.header,content:e.content,image:e.image,icon:e.icon})}},3247:function(e,n,i){i.r(n);var t=i(2791),a=i(5102),r=i(6246),l=i(5590),o=i(2687),s=i(2918),c=i(184);n.default=function(){var e=(0,t.useContext)(s.zX).isAppListening;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(a.D,{header:"Hello Admin, what do you want to do ?",content:"Management space"}),(0,c.jsx)(r.Z,{size:"small"}),(0,c.jsxs)("p",{children:["Current state : the application is ",e?"on \ud83d\udc35":"off \ud83d\ude48","."]}),e?(0,c.jsx)(o.Al,{}):(0,c.jsx)(o.J8,{replace:!0,to:"/administration/create_configuration",type:"important",text:"Create new configuration"}),(0,c.jsx)(r.Z,{}),(0,c.jsx)("h2",{children:"Create a visualization from a past configuration :"}),(0,c.jsx)(l.Z,{collection:"configurations",actionName:"Edit",actionURL:"/administration/edit_configuration/",optionRunnable:!0,optionDuplicate:!0})]})}}}]);
//# sourceMappingURL=247.74867cd8.chunk.js.map