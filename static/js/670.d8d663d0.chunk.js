"use strict";(self.webpackChunkphyphox_front=self.webpackChunkphyphox_front||[]).push([[670],{5590:function(e,n,i){i.d(n,{Z:function(){return h}});var t=i(2982),r=i(1413),l=i(885),a=i(2791),s=i(1087),o=i(7689),c=i(2022),d=i(4335),u=i(2918),f=i(184),m=function(e){var n=(0,a.useContext)(u.gd).isUserAuthentificated,i=(0,a.useState)(!1),t=(0,l.Z)(i,2),r=t[0],o=t[1];return(0,f.jsxs)("li",{className:"file-list__item"+(r?" file-list__item--deleting":""),"data-filename":e.item.filename,children:[(0,f.jsx)("span",{children:e.item.title}),(0,f.jsx)("br",{}),(0,f.jsx)(s.rU,{className:"file-list__link"+(r?" file-list__link--disabled":""),"aria-disabled":r,to:e.actionURL+e.item.id,children:e.actionName}),e.isRunnable?(0,f.jsx)("a",{onClick:e.isRunnable,"data-filename":e.item.filename,className:"file-list__link"+(r?" file-list__link--disabled":""),href:window.API+"/api/"+e.collection+"/"+e.item.filename,children:"Run"}):null,e.isDuplicable?(0,f.jsx)("a",{className:"file-list__link"+(r?" file-list__link--disabled":""),onClick:e.isDuplicable,href:window.API+"/api/"+e.collection+"/"+e.item.filename,children:"Duplicate"}):null,e.isDownloadable?(0,f.jsxs)("a",{className:"file-list__link"+(r?" file-list__link--disabled":""),href:e.downloadURL,target:"_blank",rel:"noreferrer","aria-disabled":r,download:!0,children:["download (json file, ",Math.round(e.item.filesize/1024)," KB)"]}):null,n?(0,f.jsx)("a",{className:"file-list__link"+(r?" file-list__link--disabled":""),target:"_blank",rel:"noreferrer",onClick:function(n){n.preventDefault(),e.deleteItem(n),o(!0)},href:window.API+"/api/"+e.collection+"/"+e.item.filename,children:"delete"}):null]})};var h=function(e){var n=(0,o.s0)(),i=(0,a.useContext)(u.zX).setIsAppListening,s=(0,a.useState)({error:null,isLoaded:!1,items:[]}),h=(0,l.Z)(s,2),p=h[0],_=h[1],x=function(e){e.preventDefault();var t=Date.now(),l=e.currentTarget.dataset.filename;fetch(window.API+"/api/app/state.json",{method:"PUT",credentials:"include",body:JSON.stringify({isListening:!0,currentConfiguration:l,startedAt:t})}).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("error")?_((0,r.Z)((0,r.Z)({},p),{},{error:e.error})):(i(!0),n("/"))}))},j=function(e){e.preventDefault();var n=e.currentTarget.href;fetch(n,{credentials:"include",method:"POST"}).then((function(e){return e.json()})).then((function(e){if(e.hasOwnProperty("error"))_((0,r.Z)((0,r.Z)({},p),{},{error:e.error}));else{var n=structuredClone(p.items);n.unshift(e),_((0,r.Z)((0,r.Z)({},p),{},{items:n}))}}))},w=function(e){var n=e.currentTarget.href,i=e.currentTarget.closest(".file-list__item");fetch(n,{credentials:"include",method:"DELETE"}).then((function(e){return e.json()})).then((function(e){if(!e.hasOwnProperty("error")){var n=(0,t.Z)(p.items);_((0,r.Z)((0,r.Z)({},p),{},{items:n.filter((function(e){return e.filename!==i.dataset.filename}))}))}}))};return(0,a.useEffect)((function(){p.isLoaded||fetch(window.API+"/api/"+e.collection,{method:"GET"}).then((function(e){return e.json()})).then((function(e){e.hasOwnProperty("error")?_((0,r.Z)((0,r.Z)({},p),{},{error:e.error,isLoaded:!0})):_((0,r.Z)((0,r.Z)({},p),{},{items:e,isLoaded:!0}))}),(function(e){_((0,r.Z)((0,r.Z)({},p),{},{isLoaded:!0,error:e}))}))}),[e.collection,p]),p.error?(0,f.jsx)(c.Z,{type:"error",message:p.error}):p.isLoaded?p.items.length?(0,f.jsx)("ul",{className:"file-list",children:p.items.map((function(n){return(0,f.jsx)(m,{isDownloadable:e.isDownloadable,isDuplicable:!!e.optionDuplicate&&j,isRunnable:!!e.optionRunnable&&x,downloadURL:window.API+"/api/"+e.collection+"/"+n.filename,item:n,collection:e.collection,actionName:e.actionName,actionURL:e.actionURL,deleteItem:w},n.id)}))}):(0,f.jsx)("p",{children:"Nothing yet."}):(0,f.jsx)(d.Z,{})}},2022:function(e,n,i){i.d(n,{Z:function(){return r}});i(2791);var t=i(184),r=function(e){return(0,t.jsx)("p",{className:"message message--"+(e.type?e.type:"info"),children:e.message})}},5102:function(e,n,i){i.d(n,{D:function(){return s},H:function(){return a}});var t=i(2791),r=i(2918),l=i(184),a=function(e){return(0,l.jsxs)("div",{className:"title",children:[(0,l.jsxs)("p",{className:"title__header",children:[e.header,e.icon?(0,l.jsx)("span",{className:"title__icon",children:e.icon}):null,e.image?(0,l.jsx)("img",{className:"title__image",alt:"",src:e.image}):null]}),(0,l.jsx)("h1",{className:"title__content",children:e.content})]})},s=function(e){var n=(0,t.useContext)(r.zX).isAppListening;return document.title=(n?"\ud83d\udfe9":"\ud83d\udfe7")+" phyphox, "+e.content,(0,l.jsx)(a,{header:e.header,content:e.content,image:e.image,icon:e.icon})}},2670:function(e,n,i){i.r(n);var t=i(5671),r=i(3144),l=i(136),a=i(7277),s=i(2791),o=i(5102),c=i(5590),d=i(184),u=function(e){(0,l.Z)(i,e);var n=(0,a.Z)(i);function i(){return(0,t.Z)(this,i),n.apply(this,arguments)}return(0,r.Z)(i,[{key:"render",value:function(){return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(o.D,{header:"Search, see, download",content:"Previous experiments"}),(0,d.jsx)(c.Z,{collection:"experiments",actionName:"See graph",actionURL:"/experiment/",isDownloadable:!0})]})}}]),i}(s.Component);n.default=u}}]);
//# sourceMappingURL=670.d8d663d0.chunk.js.map